import{m as je,d as R,r as pt,p as yt,q as Ue,a as xe,t as g,c as D,o as Z,b as Ne,e as C,i as d,f as k,g as S,h as f,S as V,j as Q,L as Ke,k as wt,s as Xe,l as X,u as de,n as Pe,v as Te,A as _t,w as xt,P as Je,F as $,x as $t,y as bt,C as kt,X as St,z as Ct,B as Pt}from"./vendor-90f50915.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();class ie extends Error{messages;code;data=null;constructor(e,t,s=null){super(e.join(`
`)),this.messages=e,this.code=t,this.data=s}}function Tt(){let n=0;return function(){return n+=1,n}}const Ge=Tt();function E(){const n=je();let e=[];return{off(t,s){n.off(t,s)},on(t,s){const r=()=>{e=e.filter(i=>i!==r),this.off(t,s)};return e.push(r),n.on(t,s),r},uid:Ge,emit(t,s){n.emit(t,s)},destroy(){for(let t=0;t<e.length;t+=1){const s=e[t];s()}this.emit("__destroy",null)}}}class M{unique_id="BaseDomain";debug=!1;_emitter=je();listeners={};constructor(e={}){const{unique_id:t,debug:s}=e;t&&(this.unique_id=t)}uid(){return Ge()}log(...e){return this.debug?[`%c CORE %c ${this.unique_id} %c`,"color:white;background:#dfa639;border-top-left-radius:2px;border-bottom-left-radius:2px;","color:white;background:#19be6b;border-top-right-radius:2px;border-bottom-right-radius:2px;","color:#19be6b;",...e]:[]}errorTip(...e){this.debug}off(e,t){this._emitter.off(e,t)}offEvent(e){const t=this.listeners[e]||[];for(let s=0;s<t.length;s+=1){const r=t[s];r()}}on(e,t){const s=()=>{const i=this.listeners[e]||[];this.listeners[e]=i.filter(o=>o!==s),this.off(e,t)},r=this.listeners[e]||[];return r.push(s),this.listeners[e]=r,this._emitter.on(e,t),s}emit(e,t){this._emitter.emit(e,t)}destroy(){Object.keys(this.listeners).map(e=>{const t=this.listeners[e]||[];for(let s=0;s<t.length;s+=1){const r=t[s];r()}}),this.emit("__destroy")}onDestroy(e){return this.on("__destroy",e)}get[Symbol.toStringTag](){return"Domain"}}const w={Ok:n=>({data:n,error:null}),Err:(n,e,t=null)=>({data:t,code:e,error:(()=>Array.isArray(n)?new ie(n,e,t):typeof n=="string"?new ie([n],e,t):n instanceof ie?n:typeof n=="object"?new ie([n.message],e,t):n?n.error:new ie(["未知错误"],e,t))()})};R.extend(pt);R.locale("zh-cn");function K(n){return String(n).length===1?`0${n}`:String(n)}function z(n){return n===null||n===void 0?"":Object.keys(n).filter(e=>n[e]!==void 0).map(e=>`${e}=${encodeURIComponent(n[e])}`).join("&")}function Ot(n=1e3){return new Promise(e=>{setTimeout(()=>{e(null)},n)})}let ke=null;function Mt(n){ke=n}class oe extends M{_name="RequestCore";debug=!1;defaultResponse=null;service;process;client;delay=null;loading=!1;initial=!0;pending=null;args=[];response=null;error=null;id=String(this.uid());get state(){return{initial:this.initial,loading:this.loading,error:this.error,response:this.response}}constructor(e,t={}){super({unique_id:t._name});const{_name:s,client:r,delay:i,defaultResponse:o,loading:a,process:l,onSuccess:u,onFailed:c,onCompleted:h,onCanceled:m,onLoading:p,beforeRequest:x}=t;this.service=e,this.process=l,this.client=r,i!==void 0&&(this.delay=i),a!==void 0&&(this.loading=a),o&&(this.defaultResponse=o,this.response=o),s&&(this._name=s),u&&this.onSuccess(u),h&&this.onCompleted(h),m&&this.onCanceled(m),p&&this.onLoadingChange(p),x&&this.beforeRequest(x),ke&&ke(this),c&&this.onFailed(c,{override:!0})}async run(...e){if(!this.service)return w.Err("缺少 service");if(typeof this.service!="function")return w.Err("service 不是函数");if(!this.client)return w.Err("缺少 client");if(this.pending!==null){const l=await this.pending;this.loading=!1;const u=l.data;return this.pending=null,w.Ok(u)}this.loading=!0,this.initial=!1,this.response=this.defaultResponse,this.args=e,this.error=null,this.emit(2,!0),this.emit(7,{...this.state}),this.emit(0);let t=null;const s=(()=>{const{hostname:l="",url:u,method:c,query:h,body:m,headers:p,process:x}=this.service(...e);if(x&&(t=x),c==="GET"){const y=this.client.get(l+u,h,{id:this.id,headers:p});return w.Ok(y)}if(c==="POST"){const y=this.client.post(l+u,m,{id:this.id,headers:p});return w.Ok(y)}return w.Err(`未知的 method '${c}'`)})();if(s.error)return w.Err(s.error);this.pending=s.data;const[r]=await Promise.all([this.pending,this.delay===null?null:Ot(this.delay)]);this.loading=!1;const i=(()=>t?t(r):r)(),o=this.process?this.process(i):i;if(this.emit(2,!1),this.emit(7,{...this.state}),this.emit(5),this.pending=null,o.error)return o.error.code==="CANCEL"?(this.emit(6),w.Err(o.error)):(this.error=o.error,this.emit(4,o.error),this.emit(7,{...this.state}),w.Err(o.error));const a=o.data;return this.response=a,this.emit(3,a),this.emit(7,{...this.state}),this.emit(8,a),w.Ok(a)}reload(){this.run(...this.args)}cancel(){if(!this.client)return w.Err("缺少 client");this.client.cancel(this.id)}clear(){this.response=null,this.emit(7,{...this.state}),this.emit(8,this.response)}modifyResponse(e){if(this.response===null)return;const t=e(this.response);this.response=t,this.emit(7,{...this.state}),this.emit(8,this.response)}onLoadingChange(e){return this.on(2,e)}beforeRequest(e){return this.on(0,e)}onSuccess(e){return this.on(3,e)}onFailed(e,t={}){return t.override&&this.offEvent(4),this.on(4,e)}onCanceled(e){return this.on(6,e)}onError(e){return this.on(4,e)}onCompleted(e){return this.on(5,e)}onStateChange(e){return this.on(7,e)}onResponseChange(e){return this.on(8,e)}}function Dt(n,e){let t;return function(...r){t&&clearTimeout(t),t=setTimeout(()=>{e(...r),t=null},n)}}const Ve={get(n,e,t={}){const{headers:s}=t;return{url:[n,e?"?"+z(e):""].join(""),method:"GET",headers:s}},post(n,e,t={}){const{headers:s}=t;return{url:n,method:"POST",body:e,headers:s}}};function Lt(n={}){const{hostnames:e={}}=n;let t=e.prod||"",s=n.headers??{};return n.debug,{getHostname(){return t},setHostname(r){t=r},setHeaders(r){s=r},deleteHeaders(r){delete s[r]},appendHeaders(r){s={...s,...r}},setEnv(r){const{prod:i="",dev:o=i,test:a=i,beta:l=i}=e;r==="dev"&&(t=o),r==="test"&&(t=a),r==="beta"&&(t=l),r==="prod"&&(t=i)},setDebug(r){},get(...r){const i=Ve.get(...r),{url:o,method:a,query:l,params:u,body:c,headers:h}=i;return{hostname:t,url:o,method:a,query:l,params:u,body:c,headers:{...i.headers,...s},process:n.process}},post(...r){const i=Ve.post(...r),{url:o,method:a,query:l,params:u,body:c={}}=i;return{hostname:t,url:o,method:a,query:l,params:u,body:c,headers:{...i.headers,...s},process:n.process}}}}const ee=Lt({hostnames:{},process(n){if(n.error)return w.Err(n.error);const{code:e,msg:t,data:s}=n.data;return e!==200?w.Err(t,e,s):w.Ok(s)}});class Ht extends M{value=null;get state(){return this.value}constructor(e={}){super(e);const{defaultValue:t,onChange:s}=e;t&&(this.value=t),s&&this.onStateChange(s)}select(e){this.value=e,this.emit(0,this.value)}patch(e){this.value={...this.value,...e},this.emit(0,this.value)}isEmpty(){return this.value===null}clear(){this.value=null,this.emit(0)}onStateChange(e){return this.on(0,e)}}class ue extends M{id=this.uid();cur;state={text:"Click it",loading:!1,disabled:!1};constructor(e={}){super(e),e.disabled!==void 0&&(this.state.disabled=e.disabled),this.cur=new Ht,e.onClick&&this.onClick(()=>{e.onClick?.(this.cur.value)})}click(){this.state.loading||this.state.disabled||this.emit(0)}disable(){this.state.disabled=!0,this.emit(1,{...this.state})}enable(){this.state.disabled=!1,this.emit(1,{...this.state})}bind(e){return this.cur.select(e),this}setLoading(e){this.state.loading!==e&&(this.state.loading=e,this.emit(1,{...this.state}))}onClick(e){this.on(0,e)}onStateChange(e){this.on(1,e)}}class Oe extends M{name="PresenceCore";debug=!1;animationName="none";mounted=!1;enter=!1;visible=!1;exit=!1;get state(){return{mounted:this.mounted,enter:this.enter,visible:this.visible,exit:this.exit,text:(()=>this.exit?"exit":this.enter?"enter":this.visible?"visible":"unknown")()}}constructor(e={}){super(e);const{mounted:t=!1,visible:s=!1}=e;this.mounted=t,this.visible=s,s&&(this.mounted=!0)}toggle(){if(this.visible){this.hide();return}this.show()}show(){this.mounted===!1&&(this.mounted=!0),this.exit=!1,this.enter=!0,this.visible=!0,this.emit(0,{...this.state}),setTimeout(()=>{this.emit(2)},180)}hide(e={}){const{destroy:t=!0}=e;if(t===!1){this.exit=!0,this.enter=!1,this.emit(0,{...this.state}),setTimeout(()=>{this.visible=!1,this.emit(4),this.emit(0,{...this.state})},180);return}this.exit=!0,this.enter=!1,this.emit(0,{...this.state}),setTimeout(()=>{this.visible=!1,this.emit(4),this.emit(0,{...this.state}),this.unmount()},180)}unmount(){this.mounted=!1,this.enter=!1,this.visible=!1,this.exit=!1,this.emit(6),this.emit(0,{...this.state})}reset(){this.mounted=!1,this.enter=!1,this.visible=!1,this.exit=!1,this.emit(0,{...this.state})}onTmpShow(e){return this.on(3,e)}onTmpHidden(e){return this.on(5,e)}onShow(e){return this.on(2,e)}onHidden(e){return this.on(4,e)}onUnmounted(e){return this.on(6,e)}onStateChange(e){return this.on(0,e)}onPresentChange(e){return this.on(1,e)}get[Symbol.toStringTag](){return"Presence"}}class Rt extends M{unique_id="PopperCore";debug=!0;placement="bottom";strategy="absolute";middleware=[];reference=null;floating=null;container=null;arrow=null;state={strategy:"absolute",x:0,y:0,isPlaced:!1,placedSide:"bottom",placedAlign:"center",reference:!1};_enter=!1;_focus=!1;constructor(e={}){super(e);const{_name:t,side:s="bottom",align:r="center",strategy:i="absolute",middleware:o=[]}=e;t&&(this.unique_id=t),this.strategy=i,this.placement=s+(r!=="center"?"-"+r:"")}setReference(e,t={}){this.reference!==null&&!t.force||(this.reference=e,this.state.reference=!0,this.emit(0,e),this.emit(5,{...this.state}))}updateReference(e){this.reference=e}removeReference(){this.reference!==null&&(this.state.reference=!1,this.reference=null,this.emit(5,{...this.state}))}setFloating(e){e!==null&&(this.floating=e,this.emit(1,e))}setArrow(e){this.arrow=e}setContainer(e){}setConfig(e){}setState(e){this.state.x=e.x,this.state.y=e.y,this.state.isPlaced=!0,this.emit(5,{...this.state})}place2(e){const t=this.reference;if(!t)return;const s=t.getRect(),{clientHeight:r,clientWidth:i}=window.document.documentElement,o={x:s.x,y:s.y+s.height+4};r-o.y<e.height+24&&(o.y=s.y-e.height-4),i-o.x<e.width+24&&(o.x=s.x+s.width-e.width-4),o.y<=0&&(o.y=12),this.setState(o)}async place(){if(this.middleware=[],this.reference===null||this.floating===null)return;const e=await this.computePosition(),{x:t,y:s,middlewareData:r}=e,[i,o]=Vt(this.placement);this.state={x:t,y:s,strategy:this.strategy,isPlaced:!0,placedSide:i,placedAlign:o,reference:!0},this.emit(5,{...this.state})}async computePosition(){const{placement:t,strategy:s}=this;let r=t;const i=this.reference.getRect(),o=this.floating.getRect(),a={reference:i,floating:o};let{x:l,y:u}=this.computeCoordsFromPlacement(a,t,!0),c={};for(let h=0;h<this.middleware.length;h++){const{name:m,fn:p}=this.middleware[h],{x,y,data:v,reset:b}=await p({x:l,y:u,initialPlacement:t,placement:r,strategy:s,middlewareData:c,rects:a,elements:{reference:i,floating:o}});l=x??l,u=y??u,c={...c,[m]:{...c[m],...v}}}return{x:l,y:u,placement:r,strategy:s,middlewareData:c}}computeCoordsFromPlacement(e,t,s){const{reference:r,floating:i}=e,o=r.x+r.width/2-i.width/2,a=r.y+r.height/2-i.height/2,l=Et(t),u=Yt(l),c=r[u]/2-i[u]/2,h=Ze(t),m=l==="x";let p;switch(h){case"top":p={x:o,y:r.y-i.height};break;case"bottom":p={x:o,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:a};break;case"left":p={x:r.x-i.width,y:a};break;default:p={x:r.x,y:r.y}}switch(Ft(t)){case"start":p[l]-=c*(s&&m?-1:1);break;case"end":p[l]+=c*(s&&m?-1:1);break}return p}handleEnter(){this._enter!==!0&&(this._enter=!0,this.emit(3))}handleLeave(){this._enter!==!1&&(this._enter=!1,this.emit(4))}reset(){this._enter=!1,this._focus=!1}onReferenceMounted(e){return this.on(0,e)}onFloatingMounted(e){return this.on(1,e)}onContainerChange(e){return this.on(6,e)}onEnter(e){return this.on(3,e)}onLeave(e){return this.on(4,e)}onPlaced(e){return this.on(2,e)}onStateChange(e){return this.on(5,e)}get[Symbol.toStringTag](){return"PopperCore"}}function Vt(n){const[e,t="center"]=n.split("-");return[e,t]}function Ze(n){return n.split("-")[0]}function Et(n){return["top","bottom"].includes(Ze(n))?"x":"y"}function Yt(n){return n==="y"?"height":"width"}function Ft(n){return n.split("-")[1]}class Wt extends M{name="DismissableLayerCore";layers=new Set;layersWithOutsidePointerEventsDisabled=new Set;branches=new Set;isPointerInside=!1;state={};constructor(e={}){super(e)}handlePointerOutside(e){}pointerDown(){this.isPointerInside=!0}handlePointerDownOnTop(e){if(this.isPointerInside===!0){this.isPointerInside=!1;return}this.emit(2),this.emit(3),this.emit(0)}onDismiss(e){return this.on(0,e)}}class Me extends M{shape="input";defaultValue;value;placeholder;disabled;allowClear=!0;autoComplete=!1;autoFocus=!1;isFocus=!1;type;loading=!1;valueUsed;tmpType="";get state(){return{value:this.value,placeholder:this.placeholder,disabled:this.disabled,focus:this.isFocus,loading:this.loading,type:this.type,tmpType:this.tmpType,autoComplete:this.autoComplete,autoFocus:this.autoFocus,allowClear:this.allowClear}}constructor(e){super(e);const{unique_id:t,defaultValue:s,placeholder:r="请输入",type:i="string",disabled:o=!1,autoFocus:a=!1,autoComplete:l=!1,onChange:u,onBlur:c,onEnter:h,onClear:m,onMounted:p}=e;t&&(this.unique_id=t),this.placeholder=r,this.type=i,this.disabled=o,this.autoComplete=l,this.autoFocus=a,this.defaultValue=s,this.value=s,u&&this.onChange(u),h&&this.onEnter(()=>{h(this.value)}),c&&this.onBlur(c),m&&this.onClear(m),p&&this.onMounted(p)}setMounted(){this.emit(12)}handleEnter(){this.value!==this.valueUsed&&(this.valueUsed=this.value,this.emit(15,this.value))}handleFocus(){this.isFocus=!0}handleBlur(){this.value!==this.valueUsed&&(this.valueUsed=this.value,this.emit(14,this.value))}handleClick(e){this.emit(17,e)}handleChange(e){if(this.type==="file"){const{target:r}=e,{files:i}=r;this.setValue(i);return}const{target:t}=e,{value:s}=t;this.setValue(s)}setValue(e,t={}){this.value=e,this.type==="number"&&(this.value=Number(e)),t.silence||(this.emit(10,e),this.emit(11,{...this.state}))}setPlaceholder(e){this.placeholder=e,this.emit(11,{...this.state})}setLoading(e){this.loading=e,this.emit(11,{...this.state})}setFocus(){this.isFocus=!0,this.emit(11,{...this.state})}focus(){}enable(){this.disabled=!0,this.emit(11,{...this.state})}disable(){this.disabled=!1,this.emit(11,{...this.state})}showText(){this.tmpType="text",this.emit(11,{...this.state})}hideText(){this.tmpType="",this.emit(11,{...this.state})}clear(){this.value=this.defaultValue,this.emit(16),this.emit(11,{...this.state})}reset(){this.value=this.defaultValue,this.emit(11,{...this.state})}enter(){this.emit(15)}onChange(e){return this.on(10,e)}onStateChange(e){return this.on(11,e)}onMounted(e){return this.on(12,e)}onFocus(e){return this.on(13,e)}onBlur(e){return this.on(14,e)}onEnter(e){return this.on(15,e)}onClick(e){return this.on(17,e)}onClear(e){return this.on(16,e)}}class Qe extends M{popper;present;layer;_side;_align;visible=!1;enter=!1;exit=!1;get state(){return{isPlaced:this.popper.state.isPlaced,x:this.popper.state.x,y:this.popper.state.y,enter:this.present.state.enter,visible:this.present.state.visible,exit:this.present.state.exit}}constructor(e={}){super();const{side:t="bottom",align:s="end",strategy:r}=e;this._side=t,this._align=s,this.popper=new Rt({side:t,align:s,strategy:r}),this.present=new Oe,this.layer=new Wt,this.layer.onDismiss(()=>{this.hide()}),this.present.onStateChange(()=>{this.emit(2,{...this.state})}),this.popper.onStateChange(()=>{this.emit(2,{...this.state})})}ready(){}destroy(){}toggle(e){const{visible:t}=this;if(t){this.hide();return}if(e){const{x:s,y:r,width:i=8,height:o=8}=e;this.popper.updateReference({getRect(){return{width:i,height:o,x:s,y:r}}})}this.show()}show(e){e&&this.popper.updateReference({getRect(){const{x:t=0,y:s=0,width:r=0,height:i=0,left:o=0,top:a=0,right:l=0,bottom:u=0}=e;return{width:r,height:i,x:t,y:s,left:o,top:a,right:l,bottom:u}}}),this.visible=!0,this.present.show(),this.popper.place(),this.emit(0)}hide(){this.visible!==!1&&(this.visible=!1,this.present.hide(),this.emit(1))}unmount(){super.destroy(),this.layer.destroy(),this.popper.destroy(),this.present.unmount()}onShow(e){return this.on(0,e)}onHide(e){return this.on(1,e)}onStateChange(e){return this.on(2,e)}get[Symbol.toStringTag](){return"PopoverCore"}}function Ee(n){return n.touches?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.clientX&&n.clientY?{x:n.clientX,y:n.clientY}:{x:0,y:0}}function ae(n){n&&n.cancelable&&!n.defaultPrevented&&n.preventDefault&&n.preventDefault()}function Bt(n,e){let t=Math.abs(n);return t=.82231*e/(1+4338.47/Math.pow(t,1.14791)),Math.round(n<0?-t:t)}function It(n,e){const t=Math.abs(n.x-e.x),s=Math.abs(n.y-e.y),r=Math.sqrt(t*t+s*s);return r!==0?Math.asin(s/r)/Math.PI*180:0}let Se=null;function qt(n){Se=n}class B extends M{os={android:!0,ios:!1,pc:!1,wechat:!1};rect={width:0,height:0,scrollTop:0,contentHeight:0};disabled=!1;canPullToRefresh;canReachBottom=!0;needHideIndicator=!1;scrollable=!0;pullToRefresh={step:"pending",pullStartX:0,pullStartY:0,pullMoveX:0,pullMoveY:0,distX:0,distY:0,distResisted:0};threshold=120;options;pullToRefreshOptions;isPullToRefreshing=!1;isLoadingMore=!1;startPoint=null;lastPoint={x:0,y:0};downHight=0;upHight=0;maxTouchMoveInstanceY=0;inTouchEnd=!1;inTopWhenPointDown=!1;inBottomWhenPointDown=!1;isMoveDown=!1;isMoveUp=!1;isScrollTo=!1;movetype="pending";preScrollY=0;isUpAutoLoad=!1;get state(){return{top:0,left:0,step:this.movetype,scrollTop:this.downHight,pullToRefresh:this.canPullToRefresh,scrollable:this.scrollable}}constructor(e={}){super(e);const{os:t,offset:s=80,disabled:r=!1,onScroll:i,onReachBottom:o,onPullToRefresh:a,onPullToBack:l}=e;this.options=e,this.disabled=r,t&&(this.os=t),this.pullToRefreshOptions={isLock:!1,offset:s,bottomOffset:20,minAngle:45},this.canPullToRefresh=!!a,this.canPullToRefresh||(this.needHideIndicator=!0),this.needHideIndicator&&(this.pullToRefreshOptions.offset=9999),i&&this.onScroll(i),o&&this.onReachBottom(o),a&&this.onPullToRefresh(a),Se&&Se(this)}setReady(){this.emit(9)}setRect(e){this.rect={...this.rect,...e}}startPullToRefresh=()=>{this.isPullToRefreshing||(this.isPullToRefreshing=!0,this.downHight=this.pullToRefreshOptions.offset,this.setIndicatorHeightTransition(!0),this.changeIndicatorHeight(this.downHight),this.emit(3))};finishPullToRefresh=()=>{this.isPullToRefreshing&&(this.downHight=0,this.changeIndicatorHeight(0),this.isPullToRefreshing=!1,this.emit(4))};disablePullToRefresh=()=>{this.pullToRefreshOptions.isLock=!0};enablePullToRefresh=()=>{this.pullToRefreshOptions.isLock=!1};handleMouseDown=e=>{this.handlePointDown(e)};handleMouseMove=e=>{this.handlePointMove(e)};handleTouchStart=e=>{this.handlePointDown(e)};handleTouchMove=e=>{this.handlePointMove(e)};handlePointDown=e=>{this.isScrollTo&&ae(e);const t=Ee(e);if(t.x<30){this.startPoint=null,ae(e);return}this.startPoint=t,this.lastPoint=this.startPoint,this.maxTouchMoveInstanceY=this.getBodyHeight()-this.pullToRefreshOptions.bottomOffset,this.inTouchEnd=!1;const s=this.getScrollTop();this.inTopWhenPointDown=s===0};handlePointMove=e=>{if(!this.startPoint)return;const t=this.getScrollTop();t>0&&(this.inTopWhenPointDown=!1);const s=Ee(e),r=s.y-this.startPoint.y;if(r>0&&t<=0&&(ae(e),this.canPullToRefresh&&!this.inTouchEnd&&!this.isPullToRefreshing)){if(!this.inTopWhenPointDown)return;const i=It(this.lastPoint,s);if(i&&i<this.pullToRefreshOptions.minAngle)return;if(this.maxTouchMoveInstanceY>0&&s.y>=this.maxTouchMoveInstanceY){this.inTouchEnd=!0,this.handleTouchEnd();return}this.downHight<this.pullToRefreshOptions.offset?this.movetype!=="pulling"&&(this.movetype==="pending"&&(this.setIndicatorHeightTransition(!1),this.os.ios&&!this.inTopWhenPointDown&&this.optimizeScroll(!0)),this.movetype,this.movetype="pulling",this.emit(0),this.isMoveDown=!0):this.movetype!=="releasing"&&(this.movetype="releasing",this.emit(1),this.isMoveDown=!0),this.downHight=Bt(s.y-this.startPoint.y,1e3),this.changeIndicatorHeight(this.downHight),this.emit(2,{instance:this.downHight})}if(r<0){const i=this.getScrollHeight(),o=this.getScrollClientHeight();i-o-t<=0&&ae(e)}this.lastPoint=s};handleTouchEnd=()=>{this.canPullToRefresh&&this.isMoveDown&&(this.downHight>=this.pullToRefreshOptions.offset?this.startPullToRefresh():(this.downHight=0,this.setIndicatorHeightTransition(!0),this.changeIndicatorHeight(0)),this.optimizeScroll(!1),this.movetype="pending",this.isMoveDown=!1)};handleScrolling=()=>{const e=this.getScrollTop(),t=e-this.preScrollY>0;this.isLoadingMore||this.getScrollHeight()-this.getScrollClientHeight()-e<=this.threshold&&t&&(this.isLoadingMore=!0,this.emit(8)),this.emit(7,{scrollTop:e})};finishLoadingMore(){this.isLoadingMore=!1}setMounted(){this.emit(9)}refreshRect(){}setBounce=e=>{};changeIndicatorHeight(e){}setIndicatorHeightTransition(e){}optimizeScroll(e){}hideIndicator=()=>{};scrollTo=(e,t=300)=>{};getToBottom(){return this.getScrollHeight()-this.getScrollClientHeight()-this.getScrollTop()}getOffsetTop(e){return 0}getScrollHeight(){return 0}getScrollClientHeight(){return 0}getScrollTop(){return 0}setScrollTop(e){}getBodyHeight(){return 0}destroy=()=>{};inDownOffset(e){return this.on(0,e)}outDownOffset(e){return this.on(1,e)}onPulling(e){return this.on(2,e)}onScroll(e){return this.on(7,e)}onReachBottom(e){return this.on(8,e)}onPullToRefresh(e){return this.canPullToRefresh=!0,this.on(3,e)}onMounted(e){return this.on(9,e)}}class At extends M{name="ToastCore";present=new Oe;delay=1200;timer=null;open=!1;_mask=!1;_icon=null;_texts=[];get state(){return{mask:this._mask,icon:this._icon,texts:this._texts,enter:this.present.state.enter,visible:this.present.state.visible,exit:this.present.state.exit}}constructor(e={}){super(e);const{delay:t}=e;t&&(this.delay=t),this.present.onShow(()=>{this.open=!0,this.emit(4,!0)}),this.present.onHidden(()=>{this.open=!1,this.emit(4,!1)}),this.present.onStateChange(()=>this.emit(7,{...this.state}))}async show(e){const{mask:t=!1,icon:s,texts:r}=e;if(this._mask=t,this._icon=s,this._texts=r,this.emit(7,{...this.state}),this.timer!==null){if(this.clearTimer(),this._icon==="loading")return;this.timer=setTimeout(()=>{this.hide()},this.delay);return}this.present.show(),this._icon!=="loading"&&(this.timer=setTimeout(()=>{this.hide()},this.delay))}clearTimer(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}hide(){this.present.hide(),this.clearTimer()}onShow(e){return this.on(1,e)}onHide(e){return this.on(3,e)}onOpenChange(e){return this.on(4,e)}onStateChange(e){return this.on(7,e)}get[Symbol.toStringTag](){return"ToastCore"}}function zt(n){return ee.post("/api/auth/web_login",{email:n.email,password:n.password})}function jt(n){return ee.post("/api/auth/web_register",{email:n.email,password:n.password})}function Ut(){return ee.post("/api/auth/refresh_token",{})}function Nt(){return ee.post("/api/auth/profile")}function Kt(n){return ee.post("/api/auth/validate",{token:n})}var et=(n=>(n[n.Tip=0]="Tip",n[n.Error=1]="Error",n[n.Login=2]="Login",n[n.Logout=3]="Logout",n[n.Expired=4]="Expired",n[n.TokenRefresh=5]="TokenRefresh",n[n.StateChange=6]="StateChange",n))(et||{});class Xt extends M{name="UserCore";debug=!1;id="";nickname="Anonymous";avatar_url="";token="";expires_at=null;isLogin=!1;needRegister=!1;get state(){return{id:this.id,username:this.nickname,avatar:this.avatar_url,token:this.token,expires_at:this.expires_at?this.expires_at.unix():0}}values={};$client;static Events=et;constructor(e,t){super(e);const{id:s,username:r,avatar:i,token:o,expires_at:a}=e;this.id=s,this.nickname=r,this.avatar_url=i,this.isLogin=!!o,this.token=o,a&&(this.expires_at=R(a*1e3)),this.$client=t}inputEmail(e){this.values.email=e}inputPassword(e){this.values.password=e}async validate(){if(!this.token)return this.emit(4),w.Err("缺少 token");const e=await new oe(Kt).run(this.token);return e.error?(e.error.code===900&&(this.isLogin=!1,this.emit(4)),w.Err(e.error)):w.Ok(null)}async login(){const{email:e,password:t}=this.values;if(!e)return w.Err("请输入邮箱");if(!t)return w.Err("请输入密码");const s=await new oe(zt).run({email:e,password:t});if(s.error)return w.Err(s.error);this.values={},this.isLogin=!0;const{id:r,nickname:i,avatar_url:o,token:a,expires_at:l}=s.data;return this.id=r,this.nickname=i,this.avatar_url=o,this.token=a,this.expires_at=R(l*1e3),this.emit(2,{...this.state,token:this.token,expires_at:l}),w.Ok(s.data)}logout(){this.isLogin=!1,this.emit(3)}async register(){const{email:e,password:t}=this.values;if(!e)return w.Err("请输入邮箱");if(!t)return w.Err("请输入密码");const s=await new oe(jt).run({email:e,password:t});if(s.error)return w.Err(s.error);this.values={},this.isLogin=!0;const{id:r,nickname:i,avatar_url:o,token:a,expires_at:l}=s.data;return this.id=r,this.nickname=i,this.avatar_url=o,this.token=a,this.expires_at=R(l*1e3),this.needRegister=!1,this.emit(2,{...this.state,token:this.token,expires_at:l}),w.Ok(s.data)}async fetchProfile(){if(!this.isLogin)return w.Err("请先登录");const e=await new oe(Nt).run();return e.error?e:w.Ok(e.data)}_refreshing=!1;async refreshToken(){if(this._refreshing||!this.expires_at)return;const e=R(this.expires_at).subtract(8,"hour");if(R().isAfter(e)){this._refreshing=!0;const s=await new oe(Ut,{client:this.$client,onFailed(){}}).run();if(this._refreshing=!1,s.error)return;const{token:r,expires_at:i}=s.data;this.token=r,this.expires_at=R(i*1e3),this.emit(5,{...this.state,token:this.token,expires_at:i})}}updateToken(e){const{id:t,nickname:s,avatar_url:r,token:i,expires_at:o}=e;this.isLogin=!0,this.id=t,this.nickname=s,this.avatar_url=r,this.token=i,this.expires_at=R(o*1e3),this.emit(5,{...this.state,token:this.token,expires_at:o})}setToken(e){this.token=e,this.isLogin=!!e}onError(e){return this.on(1,e)}onLogin(e){return this.on(2,e)}onLogout(e){return this.on(3,e)}onExpired(e){return this.on(4,e)}onTokenRefresh(e){return this.on(5,e)}}const me={sm:0,md:768,lg:992,xl:1200,"2xl":1536};function Ye(n){return n>=me["2xl"]?"2xl":n>=me.xl?"xl":n>=me.lg?"lg":n>=me.md?"md":"sm"}var tt=(n=>(n[n.Tip=0]="Tip",n[n.Loading=1]="Loading",n[n.HideLoading=2]="HideLoading",n[n.Error=3]="Error",n[n.Login=4]="Login",n[n.Logout=5]="Logout",n[n.ForceUpdate=6]="ForceUpdate",n[n.DeviceSizeChange=7]="DeviceSizeChange",n[n.Ready=8]="Ready",n[n.Show=9]="Show",n[n.Hidden=10]="Hidden",n[n.Resize=11]="Resize",n[n.Blur=12]="Blur",n[n.Keydown=13]="Keydown",n[n.OrientationChange=14]="OrientationChange",n[n.EscapeKeyDown=15]="EscapeKeyDown",n[n.StateChange=16]="StateChange",n))(tt||{});let Jt=class extends M{$user;$storage;lifetimes;ready=!1;screen={width:0,height:0};env={wechat:!1,ios:!1,android:!1,pc:!1,weapp:!1,prod:"develop"};orientation="vertical";curDeviceSize="md";theme="system";safeArea=!1;Events=tt;get state(){return{ready:this.ready,theme:this.theme,env:this.env,deviceSize:this.curDeviceSize}}constructor(e){super();const{user:t,storage:s,beforeReady:r,onReady:i}=e;this.$user=t,this.$storage=s,this.lifetimes={beforeReady:r,onReady:i}}async start(e){const{width:t,height:s}=e;this.screen={...this.screen,width:t,height:s},this.curDeviceSize=Ye(t);const{beforeReady:r}=this.lifetimes;if(r){const i=await r();if(i.error)return w.Err(i.error)}return this.ready=!0,this.emit(8),this.emit(16,{...this.state}),w.Ok(null)}setTheme(e){const t="请在 connect.web 中实现 setTheme 方法";return w.Err(t)}getTheme(){return"light"}tipUpdate(){this.emit(6)}tip(e){return this.emit(0,e),e.text.join(`
`)}loading(e){return this.emit(1,e),{hideLoading:()=>{this.emit(2)}}}hideLoading(){this.emit(2)}vibrate(){}setSize(e){this.screen=e}setTitle(e){throw new Error("请实现 setTitle 方法")}openWindow(e){throw new Error("请实现 openWindow 方法")}setEnv(e){this.env={...this.env,...e}}copy(e){throw new Error("请实现 copy 方法")}getComputedStyle(e){throw new Error("请实现 getComputedStyle 方法")}notify(e){}disablePointer(){throw new Error("请实现 disablePointer 方法")}enablePointer(){throw new Error("请实现 enablePointer 方法")}keydown({key:e}){e==="Escape"&&this.escape(),this.emit(13,{key:e})}escape(){this.emit(15)}resize(e){this.screen=e,this.emit(11,e)}blur(){this.emit(12)}handleScreenOrientationChange(e){if(e===0){this.orientation="vertical",this.emit(14,this.orientation);return}this.orientation="horizontal",this.emit(14,this.orientation)}handleResize(e){this.screen=e;const t=Ye(e.width);t!==this.curDeviceSize&&(this.curDeviceSize=t,this.emit(7,this.curDeviceSize)),this.emit(11,e)}onReady(e){return this.on(8,e)}onDeviceSizeChange(e){return this.on(7,e)}onUpdate(e){return this.on(6,e)}onOrientationChange(e){return this.on(14,e)}onResize(e){return this.on(11,e)}onBlur(e){return this.on(12,e)}onShow(e){return this.on(9,e)}onHidden(e){return this.on(10,e)}onKeydown(e){return this.on(13,e)}onEscapeKeyDown(e){return this.on(15,e)}onTip(e){return this.on(0,e)}onLoading(e){return this.on(1,e)}onHideLoading(e){return this.on(2,e)}onStateChange(e){return this.on(16,e)}onError(e){return this.on(3,e)}};class H extends M{static prefix=null;static parse(e){const{pathname:t,query:s,...r}=yt(e),i=Ue.parse(s,{ignoreQueryPrefix:!0});return H.prefix&&t.startsWith(H.prefix)?{...r,query:i,pathname:t.replace(H.prefix,"")}:{...r,query:i,pathname:t}}unique_id="NavigatorCore";debug=!1;name="root";pathname="/";query={};params={};location={};href="/";histories=[];prevHistories=[];prevPathname=null;origin="";host="";_pending={pathname:"/",search:"",type:"initialize"};get state(){return{pathname:this.pathname,search:this._pending.search,params:this.params,query:this.query,location:this.location}}async prepare(e){const{host:t,pathname:s,href:r,search:i,origin:o}=e;let a=s;H.prefix&&H.prefix.match(/^\/[a-z0-9A-Z]{1,}/)&&(a=s.replace(H.prefix,"")),this.setPathname(a),this.origin=o,this.host=t,this.location=e;const l=Gt(r);this.query=l,this._pending={pathname:a,search:i,type:"initialize"}}start(){const{pathname:e}=this._pending;this.setPathname(e),this.histories=[{pathname:e}],this.emit(7,{...this._pending})}setPrevPathname(e){this.prevPathname=e}setPathname(e){this.pathname=e}pushState(e){const t=(H.prefix+e).replace(/^\/\//,"/"),s=`${this.origin}${t}`,r=new URL(s),{pathname:i,search:o}=r,a=this.pathname;this.setPrevPathname(a),this.setPathname(i),this.histories.push({pathname:i}),this.emit(0,{from:a,to:i,path:i+o,pathname:i}),this.emit(10,[...this.histories])}async replaceState(e){const t=`${this.origin}${H.prefix}${e}`,s=new URL(t),{pathname:r,search:i}=s;this.setPrevPathname(this.pathname),this.setPathname(r),this.histories[this.histories.length-1]={pathname:r},this.emit(1,{from:this.prevPathname,path:r+i,pathname:r}),this.emit(10,[...this.histories])}handlePopState({type:e,pathname:t,href:s}){if(e!=="popstate")return;const r=t,i=this.pathname;this.setPrevPathname(i),this.setPathname(r);const o=(()=>this.prevHistories.length===0?!1:this.prevHistories[this.prevHistories.length-1]?.pathname===r)();if(this._pending={pathname:t,search:"",type:(()=>o?"forward":"back")()},o){this.setPrevPathname(this.pathname),this.setPathname(r);const u=this.prevHistories.pop();u&&(this.histories=this.histories.concat([u])),this.emit(4),this.emit(10,[...this.histories]),this.emit(2,{type:"forward",pathname:t,href:s});return}this.emit(3);const a=this.histories[this.histories.length-1];this.prevHistories=this.prevHistories.concat([a]).filter(Boolean),this.setPrevPathname(this.pathname),this.setPathname(r);const l=this.histories.slice(0,this.histories.length-1);this.histories=l.filter(Boolean),this.emit(10,[...this.histories]),this.emit(2,{type:"back",pathname:t,href:s})}onStart(e){return this.on(6,e)}onHistoryChange(e){return this.on(10,e)}onPushState(e){return this.on(0,e)}onReplaceState(e){return this.on(1,e)}onPopState(e){return this.on(2,e)}onReload(e){return this.on(5,e)}onPathnameChange(e){return this.on(7,e)}onBack(e){return this.on(3,e)}onForward(e){return this.on(4,e)}onRelaunch(e){return this.on(8,e)}onHistoriesChange(e){return this.on(10,e)}}function Gt(n){const[,e]=n.split("?");return e?Ue.parse(e):{}}function Fe(n,e,t){const s=(()=>!t||Object.keys(t).length===0?"":"?"+z(t))();return(()=>!n.match(/:[a-z]{1,}/)||!e||Object.keys(e).length===0?n+s:n.replace(/:([a-z]{1,})/g,(...i)=>{const[,o]=i;return String(e[o]||"")})+s)()}function nt(n,e=null){return Object.keys(n).map(s=>{const r=n[s],{title:i,pathname:o,options:a,children:l}=r,u=e?[e.name,s].filter(Boolean).join("."):s;if(l){const c=nt(l,{name:u,pathname:o});return[{title:i,name:u,pathname:o,options:a,layout:!0,parent:e?{name:e.name}:null},...c]}return[{title:i,name:u,pathname:o,options:a,parent:e?{name:e.name}:null}]}).reduce((s,r)=>s.concat(r),[])}function Zt(n){const e=nt(n),t=e.map(r=>({[r.name]:r})).reduce((r,i)=>({...r,...i}),{}),s=e.map(r=>({[r.pathname]:r})).reduce((r,i)=>({...r,...i}),{});return{routes:t,routesWithPathname:s}}class N extends M{unique_id="ViewCore";debug=!1;id=this.uid();name;pathname;title;animation={in:"fade-in",out:"fade-out"};query={};params={};_showed=!1;loaded=!1;mounted=!0;layered=!1;isRoot=!1;parent;curView=null;subViews=[];$presence=new Oe;get state(){return{mounted:this.mounted,visible:this.visible,layered:this.layered}}get href(){return[this.pathname,z(this.query)].filter(Boolean).join("?")}get visible(){return this.$presence.visible}constructor(e){super(e);const{name:t,pathname:s,title:r,query:i={},visible:o=!1,animation:a={},parent:l=null,views:u=[]}=e;this.name=t,this.pathname=s,this.parent=l,this.title=r,this.unique_id=r,this.animation=a,this.subViews=u,u.length&&(this.curView=u[0]),this.query=i,o&&(this.mounted=!0);for(let c=0;c<u.length;c+=1){const h=u[c];h.parent=this}this.$presence.onStateChange(c=>{const{visible:h,mounted:m}=c,p=this.state.visible;p===!1&&h&&this.setShow(),p&&h===!1&&this.setHidden(),this.mounted=!!m,this.emit(13,{...this.state})}),this.$presence.onUnmounted(()=>{this.emit(9)})}appendView(e){e.parent=this,this.subViews.length===0&&e.visible&&(this.curView=e),this.subViews.includes(e)||this.subViews.push(e),this.emit(0,[...this.subViews])}replaceViews(e){this.subViews=e,this.emit(0,[...this.subViews])}removeView(e,t={}){this.subViews.includes(e)&&(e.onUnmounted(()=>{e.destroy(),this.subViews=this.subViews.filter(s=>s!==e),t.callback&&t.callback(),this.emit(0,[...this.subViews])}),e.hide({reason:t.reason,destroy:t.destroy}),this.emit(0,[...this.subViews]))}findCurView(){return this.curView?this.curView.findCurView():this}ready(){this.emit(3)}showView(e,t={}){e!==this&&(e.visible||((()=>{if(!this.visible){if(!this.parent){this.isRoot;return}this.parent.showView(this,t)}})(),t.reason==="show_sibling"&&this.curView&&this.curView.hide(t),this.appendView(e),this.emit(5),this.curView=e,e.show(),this.emit(1,this.curView)))}show(){if(this.visible){this.$presence.state.mounted=!0;return}this.$presence.show()}hide(e={}){if(this.visible!==!1){for(let t=0;t<this.subViews.length;t+=1)this.subViews[t].hide(e);this.emit(7),this.$presence.hide({reason:e.reason,destroy:e.destroy})}}setShow(){this._showed||(this._showed=!0,this.emit(6))}setHidden(){this._showed=!1,this.emit(8)}mount(){this.setMounted()}unmount(){this.subViews=[],this.emit(13,{...this.state})}setMounted(){this.mounted||(this.mounted=!0,this.emit(4))}setUnmounted(){this.mounted=!1,this.emit(9)}setLoaded(){this.loaded=!0}setUnload(){this.loaded=!1}buildUrl(e){return Fe(this.pathname,this.params,e)}buildUrlWithPrefix(e){const t=Fe(this.pathname,this.params,e);return[H.prefix,t].join("")}onStart(e){return this.on(12,e)}onReady(e){return this.on(3,e)}onMounted(e){return this.on(4,e)}onViewShow(e){return this.on(2,e)}onBeforeShow(e){return this.on(5,e)}onShow(e){return this.on(6,e)}onBeforeHide(e){return this.on(7,e)}onHidden(e){return this.on(8,e)}onLayered(e){return this.on(10,e)}onUncover(e){return this.on(11,e)}onUnmounted(e){return this.on(9,e)}onSubViewsChange(e){return this.on(0,e)}onCurViewChange(e){return this.on(1,e)}onMatched(e){return this.on(14,e)}onNotFound(e){return this.on(15,e)}onStateChange(e){return this.on(13,e)}}class Qt extends M{virtual=!1;routes;views;stacks=[];cursor=-1;$router;$view;get state(){return{href:this.$router.href,stacks:this.stacks.map(e=>{const{id:t,pathname:s,title:r,query:i,visible:o}=e;return{id:[s,z(i)].filter(Boolean).join("?"),key:s,title:r,query:JSON.stringify(i,null,2),visible:o}}),cursor:this.cursor}}constructor(e){super(e);const{virtual:t=!1,view:s,router:r,routes:i,views:o}=e;this.$view=s,this.$router=r,this.routes=i,this.views=o,this.virtual=t}push(e,t={},s={}){const{ignore:r}=s;if(this.isLayout(e))return;const i=this.routes[e];if(!i)return;const o=[i.pathname,z(t)].filter(Boolean).join("?");if(o===this.$router.href)return;const a=this.views[o];if(a){if(this.ensureParent(a),a.query=t,!a.parent)return;this.$router.href=a.href,this.$router.name=a.name,this.stacks=this.stacks.slice(0,this.cursor+1).concat(a),this.cursor+=1,a.parent.showView(a,{reason:"show_sibling",destroy:!1}),this.emit(1,{reason:"push",view:a,name:e,href:a.href,pathname:a.pathname,query:a.query,ignore:r}),this.emit(5,{...this.state});return}const l=(()=>{const c=this.routes[e];return c||null})();if(!l)return null;const u=new N({name:l.name,pathname:l.pathname,title:l.title,query:t,animation:l.options?.animation,parent:null});this.views[o]=u,this.ensureParent(u),u.parent&&(this.$router.href=u.href,this.$router.name=u.name,this.stacks=this.stacks.slice(0,this.cursor+1).concat(u),this.cursor+=1,u.parent.showView(u,{reason:"show_sibling",destroy:!1}),this.emit(1,{reason:"push",view:u,name:e,href:u.href,pathname:u.pathname,query:u.query,ignore:r}),this.emit(5,{...this.state}))}replace(e,t={}){const s=[e,z(t)].filter(Boolean).join("?");if(s===this.$router.href)return;const r=this.views[s];if(r){if(this.ensureParent(r),r.query=t,!r.parent)return;this.$router.href=r.href,this.$router.name=r.name;const l=this.stacks[this.stacks.length-1];l&&l.parent?.removeView(l),this.stacks[this.stacks.length-1]=r,r.parent.showView(r),this.emit(1,{reason:"replace",view:r,name:r.name,href:r.href,pathname:r.pathname,query:r.query}),this.emit(5,{...this.state});return}const i=(()=>{const l=this.routes[e];return l||null})();if(!i)return null;const o=new N({name:i.name,pathname:i.pathname,title:i.title,query:t,animation:i.options?.animation,parent:null});if(this.views[s]=o,this.ensureParent(o),!o.parent)return;this.$router.href=o.href,this.$router.name=o.name;const a=this.stacks[this.stacks.length-1];a&&a.parent?.removeView(a,{reason:"show_sibling",callback:()=>{delete this.views[s]}}),this.stacks[this.stacks.length-1]=o,o.parent.showView(o),this.emit(1,{reason:"replace",view:o,name:o.name,href:o.href,pathname:o.pathname,query:o.query}),this.emit(5,{...this.state})}back(e={}){const t=this.cursor-1,s=this.stacks[t];if(!s)return;const r=s.href;if(!s.parent)return;this.$router.href=r,this.$router.name=s.name,this.cursor=t;const i=this.stacks.slice(t+1);for(let o=0;o<i.length;o+=1){const a=i[o];a.parent?.removeView(a,{reason:"back",destroy:!0,callback:()=>{delete this.views[a.href]}})}s.parent.showView(s,{reason:"back",destroy:!0}),this.emit(1,{reason:"back",view:s,name:s.name,href:s.href,pathname:s.pathname,query:s.query,data:e.data}),this.emit(3),this.emit(5,{...this.state})}forward(){const e=this.cursor+1,t=this.stacks[e];if(!t||!t.parent)return;const s=t.href;this.$router.href=s,this.$router.name=t.name,this.cursor=e;const r=this.stacks.slice(e+1);for(let i=0;i<r.length;i+=1){const o=r[i];o.parent?.removeView(o,{reason:"forward",callback:()=>{delete this.views[o.href]}})}t.parent.showView(t),this.emit(1,{reason:"forward",view:t,name:t.name,href:t.href,pathname:t.pathname,query:t.query}),this.emit(4),this.emit(5,{...this.state})}reload(){}destroyAllAndPush(e,t={},s={}){const{ignore:r}=s;if(this.isLayout(e))return;const i=this.routes[e];if(!i)return;const o=[i.pathname,z(t)].filter(Boolean).join("?");if(o===this.$router.href)return;const a=this.views.root,l=this.views["root.home_layout"],u=Object.keys(this.views);for(let m=0;m<u.length;m+=1)(()=>{const p=u[m];this.views[p].unmount()})();this.views={root:a,"root.home_layout":l};const c=(()=>{const m=this.routes[e];return m||null})();if(!c)return null;const h=new N({name:c.name,pathname:c.pathname,title:c.title,query:t,animation:c.options?.animation,parent:null});this.views[o]=h,this.ensureParent(h),h.parent&&(this.$router.href=h.href,this.$router.name=h.name,this.stacks=this.stacks.slice(0,this.cursor+1).concat(h),this.cursor+=1,h.parent.showView(h,{reason:"show_sibling",destroy:!1}),this.emit(1,{reason:"push",view:h,name:e,href:h.href,pathname:h.pathname,query:h.query,ignore:r}),this.emit(5,{...this.state}))}ensureParent(e){const{name:t}=e;if(e.parent){if(e.parent.pathname==="/")return;this.ensureParent(e.parent);return}const s=this.routes[t];if(!s)return;const{parent:r}=s;if(this.views[r.name]){if(e.parent=this.views[r.name],r.name==="root")return;this.ensureParent(this.views[r.name]);return}const i=this.routes[r.name];if(!i)return null;const o=new N({name:i.name,pathname:i.pathname,title:i.title,parent:null});this.views[i.name]=o,e.parent=o,this.ensureParent(o)}buildURL(e,t={}){const s=(()=>{const i=this.routes[e];return i||null})();return s?new N({name:s.name,pathname:s.pathname,title:s.title,query:t,parent:null}).buildUrl(t):this.routes["root.notfound"].pathname}buildURLWithPrefix(e,t={}){const s=(()=>{const i=this.routes[e];return i||null})();return s?new N({name:s.name,pathname:s.pathname,title:s.title,query:t,parent:null}).buildUrlWithPrefix(t):this.routes["root.notfound"].pathname}isLayout(e){const t=this.routes[e];return t?t.layout:null}handleClickLink(e){const{href:t,target:s}=e;this.emit(2,{href:t,target:s})}onTopViewChange(e){return this.on(0,e)}onRouteChange(e){return this.on(1,e)}onBack(e){return this.on(3,e)}onForward(e){return this.on(4,e)}onClickLink(e){return this.on(2,e)}onStateChange(e){return this.on(5,e)}}function en(n){const e=globalThis.document;n.getComputedStyle=y=>window.getComputedStyle(y),n.setTitle=y=>{document.title=y},n.copy=y=>{const v=document.createElement("textarea");v.value=y,document.body.appendChild(v),v.select(),document.execCommand("copy"),document.body.removeChild(v)},window.addEventListener("DOMContentLoaded",()=>{const{innerWidth:y,innerHeight:v}=window;n.setSize({width:y,height:v})}),window.addEventListener("orientationchange",function(){n.handleScreenOrientationChange(window.orientation)}),window.addEventListener("load",()=>{}),window.addEventListener("beforeunload",y=>{}),window.addEventListener("resize",()=>{}),window.addEventListener("blur",()=>{n.emit(n.Events.Blur)}),document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden"){n.emit(n.Events.Hidden);return}n.emit(n.Events.Show)});const t=navigator.userAgent,s=t.toLowerCase(),r=/iPad|iPhone|iPod/.test(t),i=/Android/.test(t);n.setEnv({wechat:s.indexOf("micromessenger")!==-1,ios:r,android:i,pc:!r&&!i});const o="(prefers-color-scheme: dark)";function a(){try{return window.matchMedia(o).matches?"dark":"light"}catch{return"light"}}function l(){const y=localStorage.getItem("theme");return!y||y==="system"?a():h.includes(y)?y:"light"}const u="data-theme";function c(y){if(y==="system"){const b=a();c(b);return}const v=document.documentElement;return v.setAttribute(u,y),v.style.colorScheme=y,w.Ok(null)}const h=["light","dark"];n.theme=l(),n.setTheme=y=>(c(y),n.theme=y,n.emit(n.Events.StateChange,{...n.state}),localStorage.setItem("theme",y),w.Ok(null)),n.getTheme=l;const{availHeight:m,availWidth:p}=window.screen;if(window.navigator.userAgent.match(/iphone/i)){const y=["375-812","414-896","428-926","390-844","393-852","430-932"].includes(`${p}-${m}`);n.safeArea=!!y}e.addEventListener("keydown",y=>{const{key:v}=y;n.keydown({key:v})});const x=e.body.style.pointerEvents;n.disablePointer=()=>{e.body.style.pointerEvents="none"},n.enablePointer=()=>{e.body.style.pointerEvents=x}}const tn=globalThis.document;function nn(n){n.reload=()=>{window.location.reload()},n.$router.onPopState(e=>{const{type:t,pathname:s,href:r}=e;if(t==="back"){n.back();return}if(t==="forward"){n.forward();return}}),n.$router.onPushState(({from:e,to:t,path:s,pathname:r})=>{window.history.pushState({from:e,to:t},"",s)}),n.$router.onReplaceState(({from:e,path:t,pathname:s})=>{window.history.replaceState({from:e},"",t)}),tn.addEventListener("click",e=>{let t=e.target;if(t instanceof Document||t===null)return;let s=!1;for(;t;){const o=t;if(o.tagName==="A"){s=!0;break}t=o.parentNode}if(!s)return;const r=t,i=r.getAttribute("href");i&&i.startsWith("/")&&(i.startsWith("http")||r.getAttribute("target")!=="_blank"&&(e.preventDefault(),n.handleClickLink({href:i,target:null})))}),window.addEventListener("popstate",e=>{const{type:t}=e,{pathname:s,href:r}=window.location;n.$router.handlePopState({type:t,href:r,pathname:e.state?.to})})}function st(n){const e={refresh(){x.emit(1,{...m})},setStartedAt(v){},startOf(...v){return t.startOf(...v)},endOf(...v){return t.endOf(...v)},format(...v){return t.format(...v)},add(...v){return t.add(...v)},subtract(...v){return t.subtract(...v)},set(...v){return t.set(...v)},isBefore(...v){return t.isBefore(...v)},isAfter(...v){return t.isAfter(...v)},setYearMonthDate(v,b,P){t.$set("year",v),t.$set("month",b),t.$set("date",P),y()},getToday(){const v=R();return{year:v.year(),month:v.month(),date:v.date()}},setToday(){const v=R();s=v.year(),r=v.month(),i=v.date(),e.setYearMonthDate(s,r,i)}},t=R(n.time);let s=t.year(),r=t.month(),i=t.date(),o=t.hour(),a=t.minute(),l=t.second(),u=t.millisecond(),c=n.time,h="00:00:00.000",m={get time(){return c},get time_text(){return h},get year(){return s},get month(){return r},get month_text(){return K(r+1)},get date(){return i},get date_text(){return K(i)},get hours(){return o},get hours_text(){return K(o)},get minutes(){return a},get minutes_text(){return K(a)},get seconds(){return l},get seconds_text(){return K(l)},get ms(){return u}},p;(v=>{v[v.Start=0]="Start",v[v.StateChange=1]="StateChange"})(p||(p={}));const x=E();function y(){s=t.year(),r=t.month(),i=t.date(),o=t.hour(),a=t.minute(),l=t.second(),u=t.millisecond(),o=o,a=a,l=l,e.refresh()}return y(),{methods:e,state:m,get $dayjs(){return t},ready(){},destroy(){x.destroy()},onStateChange(v){return x.on(1,v)}}}const sn={root:{title:"ROOT",pathname:"/",options:{require:[]},children:{home_layout:{title:"首页布局",pathname:"/home",children:{index:{title:"首页",pathname:"/home/index",options:{require:[]}},start_of:{title:"startOf 函数",pathname:"/start_of",options:{require:[]}},end_of:{title:"endOf 函数",pathname:"/end_of",options:{require:[]}},format:{title:"format 函数",pathname:"/format",options:{require:[]}},add:{title:"add 函数",pathname:"/add",options:{require:[]}},subtract:{title:"subtract 函数",pathname:"/subtract",options:{require:[]}},set:{title:"set 函数",pathname:"/set",options:{require:[]}},is_before:{title:"isBefore 函数",pathname:"/is_before",options:{require:[]}}}},notfound:{title:"404",pathname:"/notfound"}}}},rt=Zt(sn),rn=rt.routes,it=rt.routesWithPathname;class on extends M{hostname="";headers={};debug=!1;constructor(e={}){super(e);const{hostname:t="",headers:s={},debug:r=!1}=e;this.hostname=t,this.headers=s,this.debug=r}async get(e,t,s={}){try{const o={url:[this.hostname,e,t?"?"+z(t):""].join(""),method:"GET",id:s.id,headers:{...this.headers,...s.headers||{}}};this.debug;const a=await this.fetch(o);return w.Ok(a.data)}catch(r){const i=r,{message:o}=i;return w.Err(o)}}async post(e,t,s={}){const i=[this.hostname,e].join("");try{const o={url:i,method:"POST",data:t,id:s.id,headers:{...this.headers,...s.headers||{}}};this.debug;const a=await this.fetch(o);return w.Ok(a.data)}catch(o){const a=o,{message:l}=a;return w.Err(l)}}async fetch(e){return{data:{}}}cancel(e){const t="请在 connect 中实现 cancel 方法";return w.Err(t)}setHeaders(e){this.headers=e}appendHeaders(e){this.headers={...this.headers,...e}}setDebug(e){this.debug=e}onStateChange(e){return this.on(0,e)}}function an(n){let e=[];n.fetch=async t=>{const{url:s,method:r,id:i,data:o,headers:a}=t,l=xe.CancelToken.source();if(i&&e.push({id:i,source:l}),r==="GET")try{const u=await xe.get(s,{params:o,headers:a,cancelToken:l.token});return e=e.filter(c=>c.id!==i),u}catch(u){throw e=e.filter(c=>c.id!==i),u}if(r==="POST")try{const u=await xe.post(s,o,{headers:a,cancelToken:l.token});return e=e.filter(c=>c.id!==i),u}catch(u){throw e=e.filter(c=>c.id!==i),u}return Promise.reject("unknown method")},n.cancel=t=>{const s=e.find(r=>r.id===t);return s?(e=e.filter(r=>r.id!==t),s.source.cancel("主动取消"),w.Ok(null)):w.Err("没有找到对应请求")}}const ne=new on({headers:{}});an(ne);class ln extends M{key;values;defaultValues;client;get state(){return{values:this.values}}constructor(e){super(e);const{key:t,client:s,defaultValues:r,values:i}=e;this.key=t,this.values=i,this.values={...r,...i},this.defaultValues=r,this.client=s}get(e,t){const s=this.values[e];if(s===void 0){if(t)return t[e];throw new Error("the default value no existing")}return s}set=Dt(100,(e,t)=>{const s={...this.values,[e]:t};this.values=s,this.client.setItem(this.key,JSON.stringify(this.values)),this.emit(0,{...this.state})});merge=(e,t,s={})=>{const r=this.get(e)||{};if(Array.isArray(r)){let i=s.reverse?[...t,...r]:[...r,...t];return s.limit&&(i=i.slice(0,s.limit)),this.set(e,i),i}if(typeof r=="object"&&typeof t=="object"){const i={...r,...t};return this.set(e,i),i}return r};clear(e){if(this.values[e]===void 0)return null;this.values={...this.values,[e]:this.defaultValues[e]},this.client.setItem(this.key,JSON.stringify(this.values)),this.emit(0,{...this.state})}remove(e){this.clear(e)}onStateChange(e){return this.on(0,e)}}const We={user:{id:"",username:"anonymous",avatar:"",token:"",expires_at:0},theme:"",dialog_flags:{}},ot="a_global",Be=globalThis.localStorage.getItem(ot),fe=new ln({key:ot,defaultValues:We,values:Be?JSON.parse(Be):We,client:globalThis.localStorage});Mt(n=>{n.beforeRequest(()=>{W.refreshToken()}),n.onFailed(e=>{O.tip({text:[e.message??"未知错误"]}),e.code===900&&W.logout(),e.code===401&&W.logout()}),n.client||(n.client=ne)});qt(n=>n.os===O.env);H.prefix="/dayjs_playground";class un extends Xt{say(){}}const W=new un(fe.get("user"),ne),cn=new H({location:window.location}),Ce=new N({name:"root",pathname:"/",title:"ROOT",visible:!0,parent:null});Ce.isRoot=!0;const T=new Qt({view:Ce,router:cn,routes:rn,views:{root:Ce}});let le=null;const O=new Jt({user:W,storage:fe,async beforeReady(){const{pathname:n,query:e}=T.$router,t=it[n];return t?t.options?.require?.includes("login")?O.$user.isLogin?T.isLayout(t.name)?(T.push("root.home_layout.index"),w.Ok(null)):(T.push(t.name,e,{ignore:!0}),w.Ok(null)):(O.tip({text:["请先登录"]}),t.name!=="root.home_layout.index"&&t.name!=="root"&&(le={name:t.name,pathname:n,query:e}),w.Ok(null)):T.isLayout(t.name)?(T.push("root.home_layout.index"),w.Ok(null)):(T.push(t.name,e,{ignore:!0}),w.Ok(null)):(T.push("root.notfound"),w.Ok(null))}}),I=st({time:new Date().valueOf()});O.setEnv({prod:!0,dev:!1});en(O);nn(T);T.onClickLink(({href:n,target:e})=>{const{pathname:t,query:s}=H.parse(n),r=it[t];if(!r){O.tip({text:["没有匹配的页面"]});return}if(e==="_blank"){const i=T.buildURLWithPrefix(r.name,s);window.open(i);return}T.push(r.name,s)});T.onRouteChange(({ignore:n,reason:e,view:t,href:s})=>{const{title:r}=t;O.setTitle(r),!n&&O.env.ios});W.onLogin(n=>{if(fe.set("user",n),ne.appendHeaders({Authorization:W.token}),ee.appendHeaders({Authorization:W.token}),le){T.replace(le.name,le.query),le=null;return}T.destroyAllAndPush("root.home_layout.index")});W.onTokenRefresh(n=>{fe.set("user",n),ne.appendHeaders({Authorization:W.token}),ee.appendHeaders({Authorization:W.token})});var hn=g("<div>Not Found");const dn=()=>hn();function q(n,e){const t=n(...e),[s,r]=D(t.state);return t.onStateChange(i=>{r(i)}),Z(()=>{t.ready()}),Ne(()=>{t.destroy&&t.destroy()}),[s,t]}function pe(n,e={}){const[t,s]=D(n.state);return n.onStateChange(r=>{s(r)}),Z(()=>{}),n.ready&&!e.silence&&n.ready(),[t,n]}var fn=g("<button role=button>"),mn=g("<span>");function gn(n){const{store:e}=n,[t,s]=D(e.state);e.onStateChange(i=>{s(i)});const r=()=>t().disabled;return(()=>{var i=fn();return i.$$click=o=>{o.preventDefault(),e.click()},d(i,()=>n.children),k(o=>{var a={"break-keep whitespace-nowrap":!0,[n.class??""]:!0},l=r();return o.e=S(i,a,o.e),l!==o.t&&(i.disabled=o.t=l),o},{e:void 0,t:void 0}),i})()}function vn(n){const{store:e}=n,[t,s]=D(e.state);e.onStateChange(i=>{s(i)});const r=()=>t().loading;return f(V,{get when(){return r()},get children(){return n.children}})}function pn(n){const{store:e}=n,[t,s]=D(e.state);e.onStateChange(i=>{s(i)});const r=()=>t().loading;return f(V,{get when(){return!r()},get children(){return n.children}})}function yn(n){const{store:e}=n,[t,s]=D(e.state);return e.onStateChange(r=>{s(r)}),(()=>{var r=mn();return d(r,()=>n.children),k(()=>Q(r,n.class)),r})()}C(["click"]);const wn=wt("overflow-hidden inline-flex items-center justify-center text-md rounded-xl transition-colors disabled:opacity-50 disabled:pointer-events-none",{variants:{variant:{default:"bg-w-bg-5 text-w-fg-0",destructive:"bg-red-500 text-white hover:bg-red-600 dark:hover:bg-red-600",outline:"bg-transparent border-2 border-w-fg-3",subtle:"bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100",ghost:"bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-transparent dark:data-[state=open]:bg-transparent",link:"bg-transparent dark:bg-transparent underline-offset-4 hover:underline text-slate-900 dark:text-slate-100 hover:bg-transparent dark:hover:bg-transparent"},size:{default:"py-2 px-4",sm:" py-1 px-2 text-sm",lg:"px-4 text-lg"}},defaultVariants:{variant:"default",size:"default"}});function J(n){const{store:e,variant:t,size:s}=n;return f(gn,{store:e,get class(){return wn({variant:t,size:s})},get classList(){return{"space-x-2":!0,[n.class??""]:!0}},get children(){return[f(V,{get when(){return n.icon},get children(){return f(pn,{store:e,get children(){return n.icon}})}}),f(vn,{store:e,get children(){return f(Ke,{class:"animation animate-spin w-4 h-4"})}}),f(V,{get when(){return n.children},get children(){return f(yn,{store:e,get children(){return n.children}})}})]}})}function _n(n,e){n.focus=()=>{e.focus()}}var xn=g("<input multiple>");const $n=n=>{const{store:e}=n;let t;const[s,r]=D(e.state);e.onStateChange(u=>{r(u)}),Z(()=>{const u=t;u&&(_n(e,u),e.setMounted())});const i=()=>{const{type:u,value:c}=s();return u==="file"?"":c},o=()=>s().placeholder,a=()=>s().disabled,l=()=>s().type;return(()=>{var u=xn();u.addEventListener("blur",()=>{e.handleBlur()}),u.$$keydown=h=>{h.key==="Enter"&&e.handleEnter()},u.$$input=h=>{e.handleChange(h)};var c=t;return typeof c=="function"?de(c,u):t=u,k(h=>{var m=n.class,p=n.classList,x=n.style,y=o(),v=a(),b=l();return m!==h.e&&Q(u,h.e=m),h.t=S(u,p,h.t),h.a=Xe(u,x,h.a),y!==h.o&&X(u,"placeholder",h.o=y),v!==h.i&&(u.disabled=h.i=v),b!==h.n&&X(u,"type",h.n=b),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),k(()=>u.value=i()),u})()};C(["input","keydown"]);var bn=g('<div class="relative w-full"><div class="absolute left-3 top-[50%] translate-y-[-50%] text-slate-400 ">');const ye=n=>{const[e,t]=pe(n.store);return(()=>{var s=bn(),r=s.firstChild;return s.$$click=i=>{const{x:o,y:a}=i;t.handleClick({x:o,y:a})},d(r,()=>n.prefix?e().loading?f(Pe,{class:"w-4 h-4 animate-spin"}):n.prefix:null),d(s,f($n,{get class(){return n.class},get classList(){return{"flex items-center h-10 w-full rounded-xl leading-none border-2 border-w-fg-3 py-2 px-3 text-w-fg-0 bg-transparent":!0,"focus:outline-none focus:ring-w-bg-3":!0,"disabled:cursor-not-allowed disabled:opacity-50":!0,"placeholder:text-w-fg-2":!0,"pl-8":!!n.prefix,[n.class??""]:!0}},style:{"vertical-align":"bottom"},store:t}),null),s})()};ye.displayName="Input";C(["click"]);var kn=g("<div role=presentation>");const Sn=n=>{const[e,t]=D(n.store.state);return n.store.onStateChange(s=>{t(s)}),f(V,{get when(){return e().mounted},get children(){var s=kn();return s.addEventListener("animationend",()=>{n.store.unmount()}),d(s,()=>n.children),k(r=>{var i={presence:!0,...n.classList,[n.class??""]:!0},o=e().visible?"open":"closed";return r.e=S(s,i,r.e),o!==r.t&&X(s,"data-state",r.t=o),r},{e:void 0,t:void 0}),s}})};C(["click"]);const Cn=n=>n.children;C(["click"]);C(["contextmenu","pointerdown","pointermove","pointerup"]);var Pn=g("<div role=presentation>");const at=n=>{const{store:e,onClick:t}=n,[s,r]=D(e.state);return e.onStateChange(i=>r(i)),f(V,{get when(){return s().mounted},get children(){var i=Pn();return Te(i,"click",t,!0),d(i,()=>n.children),k(o=>{var a=n.class,l=n.classList,u=s().visible?"open":"closed";return a!==o.e&&Q(i,o.e=a),o.t=S(i,l,o.t),u!==o.a&&X(i,"data-state",o.a=u),o},{e:void 0,t:void 0,a:void 0}),i}})};C(["click"]);C(["click"]);C(["pointerdown","keydown"]);C(["click"]);const Ie="enable-hardware";function Tn(n,e){function t(u){n.handlePointDown(u);const c=n.getScrollTop();n.os.pc&&c<=0&&(e.addEventListener("mousemove",n.handleMouseMove,{passive:!1}),document.ondragstart=function(){return!1})}function s(){n.handleTouchEnd(),n.os.pc&&(e.removeEventListener("mousemove",n.handleMouseMove),document.ondragstart=function(){return!0})}e.addEventListener("touchstart",t),e.addEventListener("touchmove",n.handleTouchMove,{passive:!1}),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s),e.addEventListener("mousedown",t),e.addEventListener("mouseup",s),e.addEventListener("mouseleave",s),e.addEventListener("scroll",n.handleScrolling);let r=!1;n.optimizeScroll=u=>{u&&r===!1&&(e.classList.add(Ie),e.style.webkitOverflowScrolling="auto",r=!0),u===!1&&r&&(e.style.webkitOverflowScrolling="touch",e.classList.remove(Ie),r=!1)};let i=0,o=0;function a(u){let c=u.currentTarget,h=!0;for(;c&&c!==document.body&&c!==document;){const y=c.classList;if(y){if(y.contains("mescroll")||y.contains("mescroll-touch")){h=!1;break}else if(y.contains("mescroll-touch-x")||y.contains("mescroll-touch-y")){var m=u.touches?u.touches[0].pageX:0,p=u.touches?u.touches[0].pageY:0;i||(i=m),o||(o=p);const v=Math.abs(i-m),b=Math.abs(o-p),P=Math.sqrt(v*v+b*b);if(i=m,o=p,P!==0){var x=Math.asin(b/P)/Math.PI*180;if(x<=45&&y.contains("mescroll-touch-x")||x>45&&y.contains("mescroll-touch-y")){h=!1;break}}}}c=c.parentNode}h&&ae(u)}n.refreshRect=()=>{const{scrollHeight:u}=e;n.setRect({contentHeight:u})},n.setBounce=u=>{n.os.ios&&(u===!1?window.addEventListener("touchmove",a,{passive:!1}):window.removeEventListener("touchmove",a))},n.setScrollTop=u=>{e.scrollTop=u},n.getScrollTop=()=>e.scrollTop,n.getScrollClientHeight=()=>e.clientHeight,n.getScrollHeight=()=>e.scrollHeight,n.getBodyHeight=()=>document.body.clientHeight||document.documentElement.clientHeight,n.getOffsetTop=u=>{let c=u.offsetTop,h=u.offsetParent;for(;h&&h!==e;)c+=h.offsetTop+h.clientTop,h=h.offsetParent;return c};function l(u,c,h,m=300,p=30){const x=c-u;if(m===0||x===0){h&&h(c);return}const y=m/p,v=x/y;let b=0;const P=window.setInterval(()=>{b<y-1?(u+=v,h&&h(u,P),b++):(h&&h(c,P),window.clearInterval(P))},p)}n.scrollTo=(u,c)=>{const{top:h=0}=u,m=n.getScrollTop();let p=h;if(p>0){const x=n.getScrollHeight()-n.getScrollClientHeight();p>x&&(p=x)}else p=0;n.isScrollTo=!0,e.style.overflow="hidden",l(m,p,x=>{n.setScrollTop(x),x===p&&(e.style.overflow="auto",n.isScrollTo=!1)},c)},n.destroy=()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n.handleTouchMove),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",s),e.removeEventListener("mousedown",t),e.removeEventListener("mousemove",n.handleMouseMove),e.removeEventListener("mouseup",s),e.removeEventListener("mouseleave",s),e.removeEventListener("scroll",n.handleScrolling),n.setBounce(!0)}}function On(n,e){n.hideIndicator=()=>{e.innerHTML=""},n.changeIndicatorHeight=s=>{e.style.height=s+"px"};let t=!1;n.setIndicatorHeightTransition=s=>{s&&t===!1&&(e.style.transition="height 300ms",t=!0),!s&&t===!0&&(e.style.transition="unset",t=!1)}}var we=g("<div>");const Mn=n=>{const{store:e,children:t,...s}=n;let r;return Z(()=>{r&&(n.store.disabled||(e.setRect({width:r.clientWidth,height:r.clientHeight}),e.setMounted(),Tn(e,r)))}),(()=>{var i=we();Te(i,"click",n.onClick,!0);var o=r;return typeof o=="function"?de(o,i):r=i,d(i,()=>n.children),k(a=>{var l=n.class,u=n.classList,c=n.style;return l!==a.e&&Q(i,a.e=l),a.t=S(i,u,a.t),a.a=Xe(i,c,a.a),a},{e:void 0,t:void 0,a:void 0}),i})()},Dn=n=>{const{store:e}=n;let t;return Z(()=>{t&&(n.store.disabled||(On(e,t),e.needHideIndicator&&e.hideIndicator()))}),(()=>{var s=we(),r=t;return typeof r=="function"?de(r,s):t=s,s.style.setProperty("height","0"),d(s,()=>n.children),k(()=>Q(s,n.class)),s})()},Ln=n=>{const{store:e}=n;let t;return e.inDownOffset(()=>{t&&(t.style.display="block")}),e.onPullToRefresh(()=>{t&&(t.style.display="none")}),(()=>{var s=we(),r=t;return typeof r=="function"?de(r,s):t=s,d(s,()=>n.children),k(()=>Q(s,n.class)),s})()},Hn=n=>{const{store:e}=n;let t;return e.inDownOffset(()=>{t&&(t.style.display="none")}),e.onPullToRefresh(()=>{t&&(t.style.display="inline-block")}),(()=>{var s=we(),r=t;return typeof r=="function"?de(r,s):t=s,s.style.setProperty("display","none"),d(s,()=>n.children),k(()=>Q(s,n.class)),s})()};C(["click"]);var Rn=g("<div>"),Vn=g('<div class="inline-flex justify-center items-center w-full h-full">'),En=g('<div class="absolute left-0 bottom-0 w-full min-h-[30px] py-[10px]">');const ce=n=>{const{store:e,children:t,...s}=n,[r,i]=D(!1);return e.inDownOffset(()=>{i(!1)}),e.outDownOffset(()=>{i(!0)}),f(Mn,{get classList(){return{"scroll-view w-full h-full overflow-y-auto":!0,[n.class??""]:!0}},get style(){return n.style},store:e,get children(){return[f(Dn,{class:"relative w-full overflow-hidden text-center",store:e,get children(){var o=En();return d(o,f(Ln,{class:"w-[50px] h-[50px] mx-auto rounded-full bg-w-bg-0",store:e,get children(){var a=Rn();return a.style.setProperty("transition","all 300ms"),d(a,f(_t,{width:18,height:18})),k(l=>S(a,{"inline-flex justify-center items-center w-full h-full":!0,"rotate-[180deg]":r(),"rotate-[0deg]":!r()},l)),a}}),null),d(o,f(Hn,{class:"w-[50px] h-[50px] mx-auto rounded-full bg-w-bg-0",store:e,get children(){var a=Vn();return d(a,f(Pe,{class:"animate animate-spin",width:18,height:18})),a}}),null),o}}),xt(()=>n.children)]}})};var Yn=g("<div>");function lt(n){const[e,t]=D(n.store.$presence.state);return n.store.$presence.onStateChange(s=>t(s)),n.store.ready(),Z(()=>{n.store.mounted||n.store.setShow()}),Ne(()=>{n.store.setUnmounted(),n.store.destroy()}),(()=>{var s=Yn();return d(s,()=>n.children),k(r=>{var i={"duration-200":!0,[`animate-in ${n.store.animation.in??"fade-in"}`]:e().enter,[`animate-out ${n.store.animation.out??"fade-out"}`]:e().exit,"absolute inset-0 w-full":!0,[n.class||""]:!0},o=n.index,a=e().visible?"block":"none",l=e().visible?"open":"closed",u=n.store.title,c=n.store.href;return r.e=S(s,i,r.e),o!==r.t&&((r.t=o)!=null?s.style.setProperty("z-index",o):s.style.removeProperty("z-index")),a!==r.a&&((r.a=a)!=null?s.style.setProperty("display",a):s.style.removeProperty("display")),l!==r.o&&X(s,"data-state",r.o=l),u!==r.i&&X(s,"data-title",r.i=u),c!==r.n&&X(s,"data-href",r.n=c),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),s})()}C(["input"]);const Fn=n=>{const{store:e}=n;return f(Cn,{get store(){return e.popper},get children(){return n.children}})},Wn=n=>{const{store:e}=n,[t,s]=D(e.popper.container);return e.popper.onContainerChange(r=>{s(r)}),f(Sn,{get store(){return e.present},get children(){return f(Je,{get mount(){return t()??void 0},get children(){return n.children}})}})};C(["click"]);var Bn=g("<div>"),In=g('<div class=z-[999]><div><div class="__a relative text-w-fg-0">');function De(n){const[e,t]=pe(n.store);return f(Fn,{store:t,get children(){return f(Wn,{store:t,get children(){return[(()=>{var s=Bn();return s.$$click=()=>{t.hide()},s.style.setProperty("z-index","998"),k(r=>S(s,{"fixed inset-0 bg-black opacity-20 duration-200":!0,"animate-in fade-in":e().enter,"animate-out fade-out":e().exit},r)),s})(),(()=>{var s=In(),r=s.firstChild,i=r.firstChild;return s.style.setProperty("z-index","999"),s.style.setProperty("position","fixed"),s.style.setProperty("left","0"),s.style.setProperty("top","0"),i.addEventListener("animationstart",o=>{const a=o.currentTarget.getBoundingClientRect();t.popper.place2(a)}),d(i,()=>n.children),k(o=>{var a=e().isPlaced?100:0,l=e().isPlaced?`translate3d(${Math.round(e().x)}px, ${Math.round(e().y)}px, 0)`:"translate3d(0, -200%, 0)",u={"z-50 min-w-[4rem] overflow-hidden rounded-xl border-2 border-w-fg-3 bg-w-bg-0 shadow-md duration-200":!0,"animate-in fade-in":e().enter,"animate-out fade-out":e().exit};return a!==o.e&&((o.e=a)!=null?s.style.setProperty("opacity",a):s.style.removeProperty("opacity")),l!==o.t&&((o.t=l)!=null?s.style.setProperty("transform",l):s.style.removeProperty("transform")),o.a=S(r,u,o.a),o},{e:void 0,t:void 0,a:void 0}),s})()]}})}})}C(["click"]);C(["click"]);C(["click"]);C(["click"]);C(["touchstart","touchmove","touchend"]);var qn=g('<div><div class="text-w-fg-0 text-3xl"><div class="flex items-center cursor-pointer"><div></div><div class=text-center>/</div><div class=text-center></div><div class=text-center>/</div><div class=text-center></div></div><div class="flex items-center"><div class=text-center></div><div class=text-center>:</div><div><div class=text-center></div></div><div class=text-center>:</div><div class=text-center>'),An=g('<div><div class="flex h-[240px]"><div class="year w-[120px] h-full overflow-y-auto"></div><div class="month w-[120px] h-full overflow-y-auto"></div><div class="date w-[120px] h-full overflow-y-auto"></div></div><div class="p-2 border-t-2 border-w-fg-3"><div class="flex gap-2">'),$e=g("<div>");function zn(n){const[e,t]=pe(n.store);return[(()=>{var s=qn(),r=s.firstChild,i=r.firstChild,o=i.firstChild,a=o.nextSibling,l=a.nextSibling,u=l.nextSibling,c=u.nextSibling,h=i.nextSibling,m=h.firstChild,p=m.nextSibling,x=p.nextSibling,y=x.firstChild,v=x.nextSibling,b=v.nextSibling;return i.$$click=P=>{const{x:_,y:Y}=P.currentTarget.getBoundingClientRect();t.ui.$select_year.toggle({x:_,y:Y})},S(o,{"text-center cursor-pointer":!0}),o.style.setProperty("width","80px"),d(o,()=>e().year),a.style.setProperty("width","8px"),l.style.setProperty("width","40px"),d(l,()=>e().month_text),u.style.setProperty("width","8px"),c.style.setProperty("width","40px"),d(c,()=>e().date_text),m.style.setProperty("width","40px"),d(m,()=>e().hour_text),p.style.setProperty("width","8px"),y.style.setProperty("width","40px"),d(y,()=>e().minute_text),v.style.setProperty("width","8px"),b.style.setProperty("width","40px"),d(b,()=>e().second_text),s})(),f(De,{get store(){return t.ui.$select_year},get children(){var s=An(),r=s.firstChild,i=r.firstChild,o=i.nextSibling,a=o.nextSibling,l=r.nextSibling,u=l.firstChild;return d(i,f($,{get each(){return e().options_year},children:c=>(()=>{var h=$e();return h.$$click=()=>{t.methods.selectYear(c.value)},d(h,()=>c.label),k(m=>S(h,{"p-2 cursor-pointer":!0,"bg-w-bg-5":c.selected},m)),h})()})),d(o,f(ce,{get store(){return t.ui.$view_month},get children(){return f($,{get each(){return e().options_month},children:c=>(()=>{var h=$e();return h.$$click=()=>{t.methods.selectMonth(c.value)},d(h,()=>c.label),k(m=>S(h,{"p-2 cursor-pointer":!0,"bg-w-bg-5":c.selected},m)),h})()})}})),d(a,f(ce,{get store(){return t.ui.$view_date},get children(){return f($,{get each(){return e().options_date},children:c=>(()=>{var h=$e();return h.$$click=()=>{t.methods.selectDate(c.value)},d(h,()=>c.label),k(m=>S(h,{"p-2 cursor-pointer":!0,"bg-w-bg-5":c.selected},m)),h})()})}})),d(u,f(J,{get store(){return t.ui.$btn_confirm_year},children:"确定"}),null),d(u,f(J,{get store(){return t.ui.$btn_set_today},children:"今天"}),null),s}})]}C(["click"]);function ut(n){const e={refresh(){l.emit(0,{...o})},selectYear(u){s=u,e.refresh()},selectMonth(u){r=u,e.refresh()},selectDate(u){i=u,e.refresh()}},t={$clock:n.$clock,$select_year:new Qe({}),$view_month:new B({}),$view_date:new B({}),$btn_confirm_year:new ue({onClick(){t.$clock.methods.setYearMonthDate(s,r,i),t.$select_year.hide()}}),$btn_set_today:new ue({onClick(){const{year:u,month:c,date:h}=t.$clock.methods.getToday();s=u,r=c,i=h,t.$view_month.scrollTo({top:40*(r-1)}),t.$view_date.scrollTo({top:40*(i-2)}),e.refresh()}})};let s=t.$clock.state.year,r=t.$clock.state.month,i=t.$clock.state.date,o={get value(){return t.$clock.$dayjs},get year(){return t.$clock.state.year},get month(){return t.$clock.state.month},get month_text(){return t.$clock.state.month_text},get date(){return t.$clock.state.date},get date_text(){return t.$clock.state.date_text},get hour(){return t.$clock.state.hours},get hour_text(){return t.$clock.state.hours_text},get minute(){return t.$clock.state.minutes},get minute_text(){return t.$clock.state.minutes_text},get second(){return t.$clock.state.seconds},get second_text(){return t.$clock.state.seconds_text},get ms(){return t.$clock.state.ms},get options_year(){return[2022,2023,2024,2025].map(u=>({label:`${u}`,value:u,selected:u===s}))},get options_month(){return[0,1,2,3,4,5,6,7,8,9,10,11].map(u=>({label:`${u+1}月`,value:u,selected:u===r}))},get options_date(){const u=t.$clock.methods.startOf("month").date(),c=t.$clock.methods.endOf("month").date(),h=[];for(let m=u;m<c+1;m+=1)h.push({label:`${m}`,value:m,selected:m===i});return h}},a;(u=>{u[u.StateChange=0]="StateChange",u[u.Error=1]="Error"})(a||(a={}));const l=E();return t.$clock.onStateChange(()=>e.refresh()),t.$select_year.onShow(()=>{t.$view_month.scrollTo({top:40*(r-1)}),t.$view_date.scrollTo({top:40*(i-2)})}),t.$select_year.onHide(()=>{s=t.$clock.state.year,r=t.$clock.state.month,i=t.$clock.state.date,e.refresh()}),{methods:e,ui:t,state:o,ready(){},destroy(){l.destroy()},onStateChange(u){return l.on(0,u)},onError(u){return l.on(1,u)}}}function F(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):new Date(NaN)}function G(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function ct(n){const e=F(n);return e.setDate(1),e.setHours(0,0,0,0),e}function qe(n,e,t){const s=t?.ISOWeek?Gn(e):ht(e,t),r=t?.ISOWeek?he(n):j(n,t),i=rs(s,r),o=[];for(let l=0;l<=i;l++)o.push(dt(r,l));return o.reduce((l,u)=>{const c=t?.ISOWeek?Kn(u):jn(u,t),h=l.find(m=>m.weekNumber===c);return h?(h.dates.push(u),l):(l.push({weekNumber:c,dates:[u]}),l)},[])}function jn(n,e){const t=F(n),s=j(t,e).getTime()-Un(t,e).getTime();return Math.round(s/Le)+1}function Un(n,e){const t=_e(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,r=Nn(n,e),i=G(n,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),j(i,e)}function Nn(n,e){const t=F(n),s=t.getFullYear(),r=_e(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=G(n,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const a=j(o,e),l=G(n,0);l.setFullYear(s,0,i),l.setHours(0,0,0,0);const u=j(l,e);return t.getTime()>=a.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function he(n){return j(n,{weekStartsOn:1})}function Kn(n){const e=F(n),t=he(e).getTime()-Xn(e).getTime();return Math.round(t/Le)+1}function Xn(n){const e=Jn(n),t=G(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),he(t)}function Jn(n){const e=F(n),t=e.getFullYear(),s=G(n,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const r=he(s),i=G(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const o=he(i);return e.getTime()>=r.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function Gn(n){return ht(n,{weekStartsOn:1})}function ht(n,e){const t=_e(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=F(n),i=r.getDay(),o=(i<s?-7:0)+6-(i-s);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function Zn(n,e){const t=qe(ct(n),ss(n),e);if(e?.useFixedWeeks){const s=Qn(n,e);if(s<6){const r=t[t.length-1],i=r.dates[r.dates.length-1],o=Ae(i,6-s),a=qe(Ae(i,1),o,e);t.push(...a)}}return t}function Qn(n,e){return es(ns(n),ct(n),e)+1}function es(n,e,t){const s=j(n,t),r=j(e,t),i=s.getTime()-ge(s),o=r.getTime()-ge(r);return Math.round((i-o)/Le)}function j(n,e){const t=_e(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=F(n),i=r.getDay(),o=(i<s?7:0)+i-s;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}let ts={};function _e(){return ts}function ns(n){const e=F(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function Ae(n,e){const t=e*7;return dt(n,t)}function dt(n,e){const t=F(n);return isNaN(e)?G(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function ss(n){const e=F(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function rs(n,e){const t=ze(n),s=ze(e),r=t.getTime()-ge(t),i=s.getTime()-ge(s);return Math.round((r-i)/is)}function ge(n){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function ze(n){const e=F(n);return e.setHours(0,0,0,0),e}const is=864e5,Le=6048e5;function se(n){const e={refresh(){P.emit(1,{...v})}};function t(_){return`${_.getMonth()+1}月`}function s(_){x=[];const Y=Zn(_,{locale:{code:""},weekStartsOn:1});for(let A=0;A<Y.length;A+=1){const{dates:re}=Y[A];let te=!1;const He={id:A,dates:re.map((L,ft)=>{L.setHours(0),L.setMinutes(0),L.setSeconds(0),L.setMilliseconds(0);const Re=L.valueOf()===_.valueOf();return Re&&(te=!0),{id:ft,text:L.getDate().toString(),yyyy:(()=>{const mt=L.getFullYear(),gt=K(L.getMonth()+1),vt=K(L.getDate());return`${mt}-${gt}-${vt}`})(),is_prev_month:L.getMonth()<_.getMonth(),is_next_month:L.getMonth()>_.getMonth(),is_today:Re,value:L,time:L.valueOf()}})};x.push(He),te&&(y=He.dates)}}let r=n.today;function i(){return r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),{day:{text:r.getDate().toString(),value:r,time:r.valueOf()},month:{text:t(r),value:r,time:r.valueOf()},year:{text:r.getFullYear(),value:r,time:r.valueOf()},selected:{text:r.toLocaleDateString()+r.toLocaleTimeString(),value:r,time:r.valueOf()}}}const{day:o,month:a,year:l,selected:u}=i();let c=o,h=a,m=l,p=u,x=[],y=[];s(r);let v={get day(){return c},get month(){return h},get year(){return m},get weekdays(){return y},get weeks(){return x},get selectedDay(){return p}},b;(_=>{_[_.SelectDay=0]="SelectDay",_[_.StateChange=1]="StateChange"})(b||(b={}));const P=E();return{state:v,get value(){return p?p.value:null},selectDay(_){if(c.value!==_){if(_.setHours(0),_.setMinutes(0),_.setSeconds(0),_.setMilliseconds(0),c={text:_.getDate().toString(),value:_,time:_.valueOf()},P.emit(0,_),p){const Y=p.value.getFullYear(),A=_.getFullYear(),re=p.value.getMonth(),te=_.getMonth();(Y!==A||re!==te)&&(h={text:t(_),value:_,time:_.valueOf()},m={text:_.getFullYear(),value:_,time:_.valueOf()},s(_))}p={text:_.toLocaleDateString()+_.toLocaleTimeString(),value:_,time:_.valueOf()},P.emit(1,{...v})}},nextMonth(){},prevMonth(){},setToday(_){r=_;const{day:Y,month:A,year:re,selected:te}=i();c=Y,h=A,m=re,p=te,s(r),e.refresh()},buildMonthText:t,onSelectDay(_){return P.on(0,_)},onStateChange(_){return P.on(1,_)}}}var os=g("<div>");function as(n){return(()=>{var e=os();return $t(e,bt(n,{class:"p-2 rounded-full bg-w-bg-5 text-w-fg-0 cursor-pointer"}),!1,!0),d(e,()=>n.children),e})()}var ls=g('<div class="flex w-full h-full bg-w-bg-0"><div class="w-[248px] py-4 pl-2 pr-2 border-r border-w-bg-5"><div class=px-4><div class="flex items-center gap-2 py-4"></div></div><div class="flex flex-col justify-between mt-8"><div class="flex-1 space-y-1 w-full h-full overflow-y-auto rounded-xl self-start"></div></div></div><div class="flex-1 flex flex-col relative"><div class="w-full h-full">'),us=g('<div class=p-4><div class="text-lg text-w-fg-0 text-center"></div><div class="grid grid-cols-7 gap-2 mt-4">'),cs=g('<div class="text-center text-sm text-w-fg-1">'),hs=g('<div class="grid grid-cols-7 gap-2">'),ds=g('<div><div class="text-center text-sm text-w-fg-0">'),fs=g('<div class="absolute right-[-8px] top-0 w-2 h-2 rounded-full bg-red-500">'),ms=g('<div><div class="flex-1 text-lg text-w-fg-0"><div class="relative inline-block">'),gs=g("<div>");function vs(n){const e={refresh(){a.emit(0,{...i})}},t={$clock:ut({$clock:I}),$popover_calendar:new Qe({}),$calendar:se({today:I.$dayjs.toDate()})},s=[{text:"首页",url:"root.home_layout.index"},{text:"format",url:"root.home_layout.format"},{text:"startOf",url:"root.home_layout.start_of"},{text:"endOf",url:"root.home_layout.end_of"},{text:"add",url:"root.home_layout.add"},{text:"subtract",url:"root.home_layout.subtract"},{text:"set",url:"root.home_layout.set"},{text:"isBefore",url:"root.home_layout.is_before"}];let r="root.home_layout.index",i={get views(){return n.view.subViews},get menus(){return s.map(l=>({...l,selected:l.url===r}))},get cur_route_name(){return r},get calendar(){return t.$calendar.state}},o;(l=>{l[l.StateChange=0]="StateChange"})(o||(o={}));const a=E();return n.view.onSubViewsChange(l=>{e.refresh()}),n.view.onCurViewChange(l=>{e.refresh()}),n.history.onRouteChange(({name:l})=>{r=l,e.refresh()}),t.$clock.onStateChange(()=>{t.$calendar.setToday(t.$clock.ui.$clock.$dayjs.toDate())}),{ui:t,methods:e,state:i,ready(){a.emit(0,{...i})},destroy(){a.destroy()},onStateChange(l){return a.on(0,l)}}}const ps=n=>{const[e,t]=q(vs,[n]);return[(()=>{var s=ls(),r=s.firstChild,i=r.firstChild,o=i.firstChild,a=i.nextSibling,l=a.firstChild,u=r.nextSibling,c=u.firstChild;return d(i,f(zn,{get store(){return t.ui.$clock}}),o),d(o,f(as,{onClick:h=>{const{x:m,y:p}=h.currentTarget.getBoundingClientRect();t.ui.$popover_calendar.toggle({x:m,y:p})},get children(){return f(kt,{class:"w-6 h-6 text-w-fg-0"})}})),d(l,f($,{get each(){return e().menus},children:h=>{const{text:m,url:p,badge:x,selected:y,onClick:v}=h;return f(ys,{get app(){return n.app},get history(){return n.history},highlight:y,url:p,badge:x,onClick:()=>{if(p){n.history.push(p);return}v&&v()},children:m})}})),d(c,f($,{get each(){return e().views},children:(h,m)=>{const p=h.name,x=ve[p];return f(lt,{classList:{"absolute inset-0":!0,"data-[state=open]:animate-in data-[state=open]:fade-in":!0,"data-[state=closed]:animate-out data-[state=closed]:fade-out":!0},store:h,get app(){return n.app},get index(){return m()},get children(){return f(x,{get app(){return n.app},get client(){return n.client},get storage(){return n.storage},pages:ve,get history(){return n.history},view:h})}})}})),s})(),f(De,{get store(){return t.ui.$popover_calendar},get children(){var s=us(),r=s.firstChild,i=r.nextSibling;return d(r,()=>e().calendar.month.text),d(i,f($,{each:["周一","周二","周三","周四","周五","周六","周日"],children:o=>(()=>{var a=cs();return d(a,o),a})()})),d(s,f($,{get each(){return e().calendar.weeks},children:o=>(()=>{var a=hs();return d(a,f($,{get each(){return o.dates},children:l=>(()=>{var u=ds(),c=u.firstChild;return d(c,()=>l.text),k(h=>S(u,{"relative p-2 rounded-md":!0,"opacity-40":l.is_next_month||l.is_prev_month,"bg-w-bg-5":l.is_today},h)),u})()})),a})()}),null),s}})]};function ys(n){const e=(()=>{var t=ms(),s=t.firstChild,r=s.firstChild;return Te(t,"click",n.onClick,!0),d(r,()=>n.children,null),d(r,f(V,{get when(){return n.badge},get children(){return fs()}}),null),k(i=>S(t,{"relative flex items-center px-4 py-2 space-x-2 rounded-lg opacity-80 cursor-pointer hover:bg-w-bg-5":!0,"bg-w-bg-5":n.highlight},i)),t})();return f(V,{get when(){return n.url},fallback:e,get children(){var t=gs();return t.$$click=()=>{n.url&&n.history.push(n.url)},d(t,e),t}})}C(["click"]);var ws=g("<div class=h-full>"),_s=g('<div class="flex flex-col h-screen bg-w-bg-0"><div class="flex-1 overflow-auto">');function U(n){return D(n.store.ui.$history.stacks),(()=>{var e=_s(),t=e.firstChild;return d(t,f(ce,{get store(){return n.store.ui.$view},class:"scroll--hidden",get children(){var s=ws();return d(s,()=>n.children),k(()=>s.classList.toggle("p-2",!n.no_padding)),s}})),e})()}var xs=g('<div class=p-4><div class="text-6xl text-w-fg-0">dayjs Playground');function $s(n){const e={refresh(){i.emit(0,{...s})},back(){n.history.back()}},t={$view:new B({}),$history:n.history,$calendar:se({today:new Date})},s={get functions(){return[{text:"StartOf",url:"root.home_layout.start_of"}]}};let r;(o=>{o[o.StateChange=0]="StateChange"})(r||(r={}));const i=E();return{methods:e,ui:t,state:s,async ready(){},destroy(){i.destroy()},onStateChange(o){return i.on(0,o)}}}const bs=n=>{const[e,t]=q($s,[n]);return f(U,{store:t,get children(){return xs()}})};var ks=g('<div class="text-3xl text-w-fg-0">startOf'),Ss=g('<div class="grid grid-cols-4 gap-2 mt-8">'),Cs=g('<div class="p-4 rounded-lg border-2 border-w-fg-3"><div class="text-xl text-w-fg-0"></div><div class="space-y-2 mt-4">'),Ps=g('<div><div class="text-lg text-w-fg-0"></div><div class=text-w-fg-1>');function Ts(n){const e={refresh(){o.emit(0,{...r})},back(){n.history.back()}},t={$view:new B({}),$history:n.history,$calendar:se({today:new Date}),$clock:I},s=[{title:"",desc:"获取本年第一天",functions:["y","year","years"]},{title:"",desc:"获取本月第一天",functions:["M","month","months"]},{title:"",desc:"获取当天凌晨时间",functions:["D","date","dates"]},{title:"",desc:"获取当天凌晨时间",functions:["d","day","days"]},{title:"",desc:"获取本周第一天",functions:["w","week","weeks"]},{title:"",desc:"获取当前小时开始时间",functions:["h","hour","hours"]},{title:"",desc:"获取当前分钟开始时间",functions:["m","minute","minutes"]},{title:"",desc:"获取当前秒开始时间",functions:["s","second","seconds"]}],r={get content(){return s.map(a=>({title:a.title,desc:a.desc,functions:a.functions.map(l=>({text:`startOf("${l}")`,v:t.$clock.methods.startOf(l).format("YYYY-MM-DD HH:mm:ss")}))}))}};let i;(a=>{a[a.StateChange=0]="StateChange"})(i||(i={}));const o=E();return t.$clock.onStateChange(()=>e.refresh()),{methods:e,ui:t,state:r,async ready(){},destroy(){o.destroy()},onStateChange(a){return o.on(0,a)}}}const Os=n=>{const[e,t]=q(Ts,[n]);return f(U,{store:t,get children(){return[ks(),(()=>{var s=Ss();return d(s,f($,{get each(){return e().content},children:r=>(()=>{var i=Cs(),o=i.firstChild,a=o.nextSibling;return d(o,()=>r.desc),d(a,f($,{get each(){return r.functions},children:l=>(()=>{var u=Ps(),c=u.firstChild,h=c.nextSibling;return d(c,()=>l.text),d(h,()=>l.v),u})()})),i})()})),s})()]}})};var Ms=g('<div class="text-3xl text-w-fg-0">format'),Ds=g('<div class="grid grid-cols-4 gap-2 mt-8">'),Ls=g('<div class="p-4 rounded-lg border-2 border-w-fg-3"><div class="text-xl text-w-fg-0"></div><div class="space-y-2 mt-4">'),Hs=g('<div><div class="text-lg text-w-fg-0"></div><div class=text-w-fg-1>');function Rs(n){const e={refresh(){a.emit(0,{...i})},back(){n.history.back()}};R(new Date);const s={$view:new B({}),$history:n.history,$calendar:se({today:new Date}),$clock:I},r=[{title:"",desc:"",functions:["YYYY-MM-DD HH:mm:ss"]},{title:"",desc:"",functions:["YY","YYYY"]},{title:"",desc:"",functions:["M","MM","MMM","MMMM"]},{title:"",desc:"",functions:["D","DD"]},{title:"",desc:"",functions:["H","HH","h","hh"]},{title:"",desc:"",functions:["m","mm"]},{title:"",desc:"",functions:["s","ss","S","SS","SSS"]},{title:"",desc:"",functions:["Z","ZZ"]},{title:"",desc:"",functions:["A","a"]},{title:"",desc:"",functions:["Do"]},{title:"",desc:"",functions:["X","x"]}],i={get content(){return r.map(l=>({title:l.title,desc:l.desc,functions:l.functions.map(u=>({text:`format("${u}")`,v:s.$clock.methods.format(u)}))}))}};let o;(l=>{l[l.StateChange=0]="StateChange"})(o||(o={}));const a=E();return s.$clock.onStateChange(()=>e.refresh()),{methods:e,ui:s,state:i,async ready(){},destroy(){a.destroy()},onStateChange(l){return a.on(0,l)}}}const Vs=n=>{const[e,t]=q(Rs,[n]);return f(U,{store:t,get children(){return[Ms(),(()=>{var s=Ds();return d(s,f($,{get each(){return e().content},children:r=>(()=>{var i=Ls(),o=i.firstChild,a=o.nextSibling;return d(o,()=>r.desc),d(a,f($,{get each(){return r.functions},children:l=>(()=>{var u=Hs(),c=u.firstChild,h=c.nextSibling;return d(c,()=>l.text),d(h,()=>l.v),u})()})),i})()})),s})()]}})};var Es=g('<div class="text-3xl text-w-fg-0">endOf'),Ys=g('<div class="grid grid-cols-4 gap-2 mt-8">'),Fs=g('<div class="p-4 rounded-lg border-2 border-w-fg-3"><div class="text-xl text-w-fg-0"></div><div class="space-y-2 mt-4">'),Ws=g('<div><div class="text-lg text-w-fg-0"></div><div class=text-w-fg-1>');function Bs(n){const e={refresh(){o.emit(0,{...r})},back(){n.history.back()}},t={$view:new B({}),$history:n.history,$calendar:se({today:new Date}),$clock:I},s=[{title:"",desc:"获取本年最后一天",functions:["y","year","years"]},{title:"",desc:"获取本月最后一天",functions:["M","month","months"]},{title:"",desc:"获取当天最晚时间",functions:["D","date","dates"]},{title:"",desc:"获取当天最晚时间",functions:["d","day","days"]},{title:"",desc:"获取本周最后一天",functions:["w","week","weeks"]},{title:"",desc:"获取当前小时结束时间",functions:["h","hour","hours"]},{title:"",desc:"获取当前分钟结束时间",functions:["m","minute","minutes"]},{title:"",desc:"获取当前秒结束时间",functions:["s","second","seconds"]}],r={get content(){return s.map(a=>({title:a.title,desc:a.desc,functions:a.functions.map(l=>({text:`endOf("${l}")`,v:t.$clock.methods.endOf(l).format("YYYY-MM-DD HH:mm:ss")}))}))}};let i;(a=>{a[a.StateChange=0]="StateChange"})(i||(i={}));const o=E();return t.$clock.onStateChange(()=>e.refresh()),{methods:e,ui:t,state:r,async ready(){},destroy(){o.destroy()},onStateChange(a){return o.on(0,a)}}}const Is=n=>{const[e,t]=q(Bs,[n]);return f(U,{store:t,get children(){return[Es(),(()=>{var s=Ys();return d(s,f($,{get each(){return e().content},children:r=>(()=>{var i=Fs(),o=i.firstChild,a=o.nextSibling;return d(o,()=>r.desc),d(a,f($,{get each(){return r.functions},children:l=>(()=>{var u=Ws(),c=u.firstChild,h=c.nextSibling;return d(c,()=>l.text),d(h,()=>l.v),u})()})),i})()})),s})()]}})};var qs=g('<div class="text-3xl text-w-fg-0">add'),As=g('<div class="flex items-center gap-2 mt-8"><div class=w-[120px]>'),zs=g('<div class="grid grid-cols-4 gap-2 mt-4">'),js=g('<div class="p-4 rounded-lg border-2 border-w-fg-3"><div class="text-xl text-w-fg-0"></div><div class="space-y-2 mt-4">'),Us=g('<div><div class="text-lg text-w-fg-0"></div><div class=text-w-fg-1>');function Ns(n){const e={refresh(){a.emit(0,{...i})},back(){n.history.back()}},t={$view:new B({}),$history:n.history,$clock:I,$input_value:new Me({defaultValue:1,type:"number"}),$btn_value_apply:new ue({onClick(){const l=t.$input_value.value;l!==void 0&&(s=l,e.refresh())}})};let s=1;const r=[{title:"",desc:"增加%v年时间",functions:["y","year","years"]},{title:"",desc:"增加%v月时间",functions:["M","month","months"]},{title:"",desc:"",functions:["D"]},{title:"",desc:"增加%v天时间",functions:["d","day","days"]},{title:"",desc:"增加%v周时间",functions:["w","week","weeks"]},{title:"",desc:"增加%v小时时间",functions:["h","hour","hours"]},{title:"",desc:"增加%v分钟时间",functions:["m","minute","minutes"]},{title:"",desc:"增加%v秒时间",functions:["s","second","seconds"]}],i={get content(){return r.map(l=>({title:l.title,desc:l.desc.replace(/%v/,String(s)),functions:l.functions.map(u=>({text:`add(1, "${u}")`,v:t.$clock.methods.add(1,u).format("YYYY-MM-DD HH:mm:ss")}))}))}};let o;(l=>{l[l.StateChange=0]="StateChange"})(o||(o={}));const a=E();return t.$clock.onStateChange(()=>e.refresh()),{methods:e,ui:t,state:i,async ready(){},destroy(){a.destroy()},onStateChange(l){return a.on(0,l)}}}const Ks=n=>{const[e,t]=q(Ns,[n]);return f(U,{store:t,get children(){return[qs(),(()=>{var s=As(),r=s.firstChild;return d(r,f(ye,{get store(){return t.ui.$input_value}})),d(s,f(J,{get store(){return t.ui.$btn_value_apply},children:"设置"}),null),s})(),(()=>{var s=zs();return d(s,f($,{get each(){return e().content},children:r=>(()=>{var i=js(),o=i.firstChild,a=o.nextSibling;return d(o,()=>r.desc),d(a,f($,{get each(){return r.functions},children:l=>(()=>{var u=Us(),c=u.firstChild,h=c.nextSibling;return d(c,()=>l.text),d(h,()=>l.v),u})()})),i})()})),s})()]}})};var Xs=g('<div class="text-3xl text-w-fg-0">subtract'),Js=g('<div class="flex items-center gap-2 mt-8"><div class=w-[120px]>'),Gs=g('<div class="grid grid-cols-4 gap-2 mt-4">'),Zs=g('<div class="p-4 rounded-lg border-2 border-w-fg-3"><div class="text-xl text-w-fg-0"></div><div class="space-y-2 mt-4">'),Qs=g('<div><div class="text-lg text-w-fg-0"></div><div class=text-w-fg-1>');function er(n){const e={refresh(){a.emit(0,{...i})},back(){n.history.back()}},t={$view:new B({}),$history:n.history,$clock:I,$input_value:new Me({defaultValue:1,type:"number"}),$btn_value_apply:new ue({onClick(){const l=t.$input_value.value;l!==void 0&&(s=l,e.refresh())}})};let s=1;const r=[{title:"",desc:"减少%v年时间",functions:["y","year","years"]},{title:"",desc:"减少%v月时间",functions:["M","month","months"]},{title:"",desc:"",functions:["D"]},{title:"",desc:"减少%v天时间",functions:["d","day","days"]},{title:"",desc:"减少%v周时间",functions:["w","week","weeks"]},{title:"",desc:"减少%v小时时间",functions:["h","hour","hours"]},{title:"",desc:"减少%v分钟时间",functions:["m","minute","minutes"]},{title:"",desc:"减少%v秒时间",functions:["s","second","seconds"]}],i={get content(){return r.map(l=>({title:l.title,desc:l.desc.replace(/%v/,String(s)),functions:l.functions.map(u=>({text:`subtract(1, "${u}")`,v:t.$clock.methods.subtract(1,u).format("YYYY-MM-DD HH:mm:ss")}))}))}};let o;(l=>{l[l.StateChange=0]="StateChange"})(o||(o={}));const a=E();return t.$clock.onStateChange(()=>e.refresh()),{methods:e,ui:t,state:i,async ready(){},destroy(){a.destroy()},onStateChange(l){return a.on(0,l)}}}const tr=n=>{const[e,t]=q(er,[n]);return f(U,{store:t,get children(){return[Xs(),(()=>{var s=Js(),r=s.firstChild;return d(r,f(ye,{get store(){return t.ui.$input_value}})),d(s,f(J,{get store(){return t.ui.$btn_value_apply},children:"设置"}),null),s})(),(()=>{var s=Gs();return d(s,f($,{get each(){return e().content},children:r=>(()=>{var i=Zs(),o=i.firstChild,a=o.nextSibling;return d(o,()=>r.desc),d(a,f($,{get each(){return r.functions},children:l=>(()=>{var u=Qs(),c=u.firstChild,h=c.nextSibling;return d(c,()=>l.text),d(h,()=>l.v),u})()})),i})()})),s})()]}})};var nr=g('<div class="text-3xl text-w-fg-0">set'),sr=g('<div class="flex items-center gap-2 mt-8"><div class=w-[120px]>'),rr=g('<div class="grid grid-cols-4 gap-2 mt-4">'),ir=g('<div class="p-4 rounded-lg border-2 border-w-fg-3"><div class="text-xl text-w-fg-0"></div><div class="space-y-2 mt-4">'),or=g('<div><div class="text-lg text-w-fg-0"></div><div class=text-w-fg-1>');function ar(n){const e={refresh(){a.emit(0,{...i})},back(){n.history.back()}},t={$view:new B({}),$history:n.history,$calendar:se({today:new Date}),$clock:I,$input_value:new Me({defaultValue:1,type:"number"}),$btn_value_apply:new ue({onClick(){const l=t.$input_value.value;l!==void 0&&(s=l,e.refresh())}})};let s=1;const r=[{title:"",desc:"将年设置为%v",functions:["y","year","years"]},{title:"",desc:"将月设置为%v",functions:["M","month","months"]},{title:"",desc:"将日期设置为%v",functions:["D","date","dates"]},{title:"",desc:"将day设置为%v",functions:["d","day","days"]},{title:"",desc:"将小时设置为%v",functions:["h","hour","hours"]},{title:"",desc:"将分钟设置为%v",functions:["m","minute","minutes"]},{title:"",desc:"将秒设置为%v",functions:["s","second","seconds"]}],i={get startOfFunctions(){return r.map(l=>({title:l.title,desc:l.desc.replace(/%v/,String(s)),functions:l.functions.map(u=>({text:`set(${s}, "${u}")`,v:t.$clock.methods.set(u,s).format("YYYY-MM-DD HH:mm:ss")}))}))}};let o;(l=>{l[l.StateChange=0]="StateChange"})(o||(o={}));const a=E();return t.$clock.onStateChange(()=>e.refresh()),{methods:e,ui:t,state:i,async ready(){},destroy(){a.destroy()},onStateChange(l){return a.on(0,l)}}}const lr=n=>{const[e,t]=q(ar,[n]);return f(U,{store:t,get children(){return[nr(),(()=>{var s=sr(),r=s.firstChild;return d(r,f(ye,{get store(){return t.ui.$input_value}})),d(s,f(J,{get store(){return t.ui.$btn_value_apply},children:"设置"}),null),s})(),(()=>{var s=rr();return d(s,f($,{get each(){return e().startOfFunctions},children:r=>(()=>{var i=ir(),o=i.firstChild,a=o.nextSibling;return d(o,()=>r.desc),d(a,f($,{get each(){return r.functions},children:l=>(()=>{var u=or(),c=u.firstChild,h=c.nextSibling;return d(c,()=>l.text),d(h,()=>l.v),u})()})),i})()})),s})()]}})};var ur=g('<div class><div><div class="flex items-center p-2 rounded-lg border-2 border-w-fg-3 cursor-pointer"><div></div><div class=text-center>/</div><div class=text-center></div><div class=text-center>/</div><div class=text-center></div></div><div class="flex items-center"><div class=text-center></div><div class=text-center>:</div><div><div class=text-center></div></div><div class=text-center>:</div><div class=text-center>'),cr=g('<div><div class="flex h-[240px]"><div class="year w-[120px] h-full overflow-y-auto"></div><div class="month w-[120px] h-full overflow-y-auto"></div><div class="date w-[120px] h-full overflow-y-auto"></div></div><div class="p-2 border-t-2 border-w-fg-3"><div class="flex gap-2">'),be=g("<div>");function hr(n){const[e,t]=pe(n.store);return[(()=>{var s=ur(),r=s.firstChild,i=r.firstChild,o=i.firstChild,a=o.nextSibling,l=a.nextSibling,u=l.nextSibling,c=u.nextSibling,h=i.nextSibling,m=h.firstChild,p=m.nextSibling,x=p.nextSibling,y=x.firstChild,v=x.nextSibling,b=v.nextSibling;return S(r,{"flex items-center gap-2 text-w-fg-0":!0,"text-xl":!0}),i.$$click=P=>{const{x:_,y:Y}=P.currentTarget.getBoundingClientRect();t.ui.$select_year.toggle({x:_,y:Y})},S(o,{"text-center cursor-pointer":!0}),o.style.setProperty("width","48px"),d(o,()=>e().year),a.style.setProperty("width","8px"),l.style.setProperty("width","24px"),d(l,()=>e().month_text),u.style.setProperty("width","8px"),c.style.setProperty("width","24px"),d(c,()=>e().date_text),m.style.setProperty("width","24px"),d(m,()=>e().hour_text),p.style.setProperty("width","8px"),y.style.setProperty("width","24px"),d(y,()=>e().minute_text),v.style.setProperty("width","8px"),b.style.setProperty("width","24px"),d(b,()=>e().second_text),s})(),f(De,{get store(){return t.ui.$select_year},get children(){var s=cr(),r=s.firstChild,i=r.firstChild,o=i.nextSibling,a=o.nextSibling,l=r.nextSibling,u=l.firstChild;return d(i,f($,{get each(){return e().options_year},children:c=>(()=>{var h=be();return h.$$click=()=>{t.methods.selectYear(c.value)},d(h,()=>c.label),k(m=>S(h,{"p-2 cursor-pointer":!0,"bg-w-bg-5":c.selected},m)),h})()})),d(o,f(ce,{get store(){return t.ui.$view_month},get children(){return f($,{get each(){return e().options_month},children:c=>(()=>{var h=be();return h.$$click=()=>{t.methods.selectMonth(c.value)},d(h,()=>c.label),k(m=>S(h,{"p-2 cursor-pointer":!0,"bg-w-bg-5":c.selected},m)),h})()})}})),d(a,f(ce,{get store(){return t.ui.$view_date},get children(){return f($,{get each(){return e().options_date},children:c=>(()=>{var h=be();return h.$$click=()=>{t.methods.selectDate(c.value)},d(h,()=>c.label),k(m=>S(h,{"p-2 cursor-pointer":!0,"bg-w-bg-5":c.selected},m)),h})()})}})),d(u,f(J,{get store(){return t.ui.$btn_confirm_year},children:"确定"}),null),d(u,f(J,{get store(){return t.ui.$btn_set_today},children:"今天"}),null),s}})]}C(["click"]);var dr=g('<div class="text-3xl text-w-fg-0">isBefore'),fr=g("<div class=mt-8>"),mr=g('<div class="grid grid-cols-3 gap-2 mt-4">'),gr=g('<div class="p-4 rounded-lg border-2 border-w-fg-3"><div class="text-xl text-w-fg-0"></div><div class="space-y-2 mt-4">'),vr=g('<div><div class="text-lg text-w-fg-0">');function pr(n){const e={refresh(){o.emit(0,{...r})},back(){n.history.back()}},t={$view:new B({}),$history:n.history,$input_time:ut({$clock:st({time:new Date().valueOf()})}),$clock:I},s=[{title:"",desc:"用于获取指定时间当年的第一天",functions:["y","year","years"]},{title:"",desc:"",functions:["M","month","months"]},{title:"",desc:"",functions:["D","date","dates"]},{title:"",desc:"",functions:["d","day","days"]},{title:"",desc:"",functions:["w","week","weeks"]},{title:"",desc:"",functions:["h","hour","hours"]},{title:"",desc:"",functions:["m","minute","minutes"]},{title:"",desc:"",functions:["s","second","seconds"]},{title:"",desc:"",functions:["ms","millisecond","milliseconds"]}],r={get content(){return s.map(a=>({title:a.title,desc:a.desc,functions:a.functions.map(l=>({text:`isBefore("${t.$input_time.state.value.format("YYYY-MM-DD HH:mm:ss")}", "${l}")`,v:t.$clock.methods.isBefore(t.$input_time.state.value,l)}))}))}};let i;(a=>{a[a.StateChange=0]="StateChange"})(i||(i={}));const o=E();return t.$input_time.onStateChange(()=>e.refresh()),{methods:e,ui:t,state:r,async ready(){},destroy(){o.destroy()},onStateChange(a){return o.on(0,a)}}}const yr=n=>{const[e,t]=q(pr,[n]);return f(U,{store:t,get children(){return[dr(),(()=>{var s=fr();return d(s,f(hr,{get store(){return t.ui.$input_time}})),s})(),(()=>{var s=mr();return d(s,f($,{get each(){return e().content},children:r=>(()=>{var i=gr(),o=i.firstChild,a=o.nextSibling;return d(o,()=>r.desc),d(a,f($,{get each(){return r.functions},children:l=>(()=>{var u=vr(),c=u.firstChild;return d(c,()=>l.text),d(u,f(V,{get when(){return l.v},get fallback(){return f(St,{class:"w-4 h-4 text-red-500"})},get children(){return f(Ct,{class:"w-4 h-4 text-green-500"})}}),null),u})()})),i})()})),s})()]}})},ve={"root.notfound":dn,"root.home_layout":ps,"root.home_layout.index":bs,"root.home_layout.start_of":Os,"root.home_layout.end_of":Is,"root.home_layout.format":Vs,"root.home_layout.add":Ks,"root.home_layout.subtract":tr,"root.home_layout.set":lr,"root.home_layout.is_before":yr};var wr=g("<div class>");const _r=n=>n.children,xr=n=>{const{store:e}=n;return f(at,{get store(){return e.present},get children(){return f(Je,{get children(){return n.children}})}})},$r=n=>(()=>{var e=wr();return d(e,f(at,{get store(){return n.store.present},get class(){return n.class},get children(){return n.children}})),k(t=>S(e,n.classList,t)),e})();var br=g('<div class="z-0 absolute inset-0 rounded-xl bg-black opacity-90">'),kr=g('<div class="relative left-1/2 w-6 h-6 -translate-x-1/2">'),Sr=g("<div class>"),Cr=g('<div class="z-10 relative space-y-4 p-6 w-120 h-120">'),Pr=g("<div>"),Tr=g('<div class="whitespace-nowrap text-center text-white">');const Or=n=>{const[e,t]=D(n.store.state);return n.store.onStateChange(s=>{t(s)}),f(_r,{get store(){return n.store},get children(){return f(xr,{get store(){return n.store},get children(){var s=Pr();return S(s,{"fixed z-[99999] left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2":!0}),d(s,f($r,{get store(){return n.store},get classList(){return{"relative duration-200":!0,"animate-in fade-in":e().enter,"animate-out fade-out":e().exit}},get children(){return[br(),(()=>{var r=Cr();return d(r,f(V,{get when(){return e().icon==="loading"},get children(){var i=kr();return d(i,f(Ke,{class:"w-full h-full animate-spin"})),i}}),null),d(r,f(V,{get when(){return e().texts.length},get children(){var i=Sr();return d(i,f($,{get each(){return e().texts},children:o=>(()=>{var a=Tr();return d(a,o),a})()})),i}}),null),r})()]}})),s}})}})};var Mr=g('<div class="flex items-center justify-center w-full h-full"><div class="flex flex-col items-center text-w-fg-1"><div class="mt-4 text-center">正在加载'),Dr=g('<div class="screen w-screen h-screen">');function Lr(){const n=T.$view,e=new At,[t,s]=D(O.state),[r,i]=D(n.subViews);return O.onStateChange(o=>{s(o)}),n.onSubViewsChange(o=>{i(o)}),O.onTip(o=>{const{icon:a,text:l}=o;e.show({icon:a,texts:l})}),O.onLoading(o=>{const{text:a}=o;e.show({icon:"loading",texts:a})}),O.onHideLoading(()=>{e.hide()}),Z(()=>{const{innerWidth:o,innerHeight:a,location:l}=window;T.$router.prepare(l),O.start({width:o,height:a})}),(()=>{var o=Dr();return d(o,f(V,{get when(){return!t().ready},get children(){var a=Mr(),l=a.firstChild,u=l.firstChild;return d(l,f(Pe,{class:"w-8 h-8 animate-spin"}),u),a}}),null),d(o,f(V,{get when(){return r().length!==0},get children(){return f($,{get each(){return r()},children:(a,l)=>{const u=a.name,c=ve[u];return f(lt,{class:"h-full",app:O,store:a,get index(){return l()},classList:{},get children(){return f(c,{app:O,history:T,storage:fe,pages:ve,client:ne,view:a})}})}})}}),null),d(o,f(Or,{store:e}),null),o})()}const Hr=document.getElementById("root");Pt(()=>f(Lr,{}),Hr);
